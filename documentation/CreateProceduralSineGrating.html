<h2 id="psychtoolbox-psychglimageprocessing">[[Psychtoolbox]] › [[PsychGLImageProcessing]]</h2>
<p>[gratingid, gratingrect] = <a href="CreateProceduralSineGrating" class="uri">CreateProceduralSineGrating</a>(windowPtr, width, height [, backgroundColorOffset =(0,0,0,0)] [, radius=inf][, contrastPreMultiplicator=1])</p>
<p>Creates a procedural texture that allows to draw sine grating stimulus patches<br />
in a very fast and efficient manner on modern graphics hardware.</p>
<p>‘windowPtr’ A handle to the onscreen window.<br />
‘width’ x ‘height’ The maximum size (in pixels) of the grating. More<br />
precise, the size of the mathematical support of the grating. Providing too<br />
small values here would ‘cut off’ peripheral parts or your grating. Too big<br />
values don’t hurt wrt. correctness or accuracy, they just hurt<br />
performance, ie. drawing speed. Use a reasonable size for your purpose.</p>
<p>‘backgroundColorOffset’ Optional, defaults to [0 0 0 0]. A RGBA offset<br />
color to add to the final RGBA colors of the drawn grating, prior to<br />
drawing it.</p>
<p>‘radius’ Optional parameter. If specified, a circular aperture of<br />
‘radius’ pixels is applied to the grating. By default, no aperture is<br />
applied.</p>
<p>‘contrastPreMultiplicator’ Optional, defaults to 1. This value is<br />
multiplied as a scaling factor to the requested contrast value. If you<br />
specify contrastPreMultiplicator = 0.5 then the per grating ‘contrast’<br />
value will correspond to what practitioners of the field usually<br />
understand to be the contrast value of a grating.</p>
<p>The function returns a procedural texture handle ‘gratingid’ that you can<br />
pass to the <a href="Screen" class="uri">Screen</a>(‘DrawTexture(s)’, windowPtr, gratingid, …) functions<br />
like any other texture handle. The ‘gratingrect’ is a rectangle which<br />
describes the size of the support.</p>
<h3 id="a-typical-invocation-to-draw-a-grating-patch-looks-like-this">A typical invocation to draw a grating patch looks like this:</h3>
<p><a href="Screen" class="uri">Screen</a>(‘DrawTexture’, windowPtr, gratingid, [], dstRect, Angle, [], [],<br />
modulateColor, [], [], [phase+180, freq, contrast, 0]);</p>
<p>Draws the grating ‘gratingid’ into window ‘windowPtr’, at position ‘dstRect’<br />
or in the center if dstRect is set to []. Make sure ‘dstRect’ has the<br />
size of ‘gratingrect’ to avoid spatial distortions! You could do, e.g.,<br />
dstRect = <a href="OffsetRect" class="uri">OffsetRect</a>(gratingrect, xc, yc) to place the grating centered at<br />
screen position (xc,yc). ‘Angle’ is the optional orientation angle,<br />
default is zero degrees. ‘modulateColor’ is the base color of the grating<br />
patch - it defaults to white, ie. the grating has only luminance, but no<br />
color. If you’d set it to [255 0 0] you’d get a reddish grating. ‘phase’ is<br />
the phase of the grating in degrees, ‘freq’ is its spatial frequency in<br />
cycles per pixel, ‘contrast’ is the contrast of your grating.</p>
<p>For a zero degrees grating:<br />
g(x,y) = modulatecolor * contrast * contrastPreMultiplicator * sin(x*2*pi*freq + phase) + Offset.</p>
<p>Make sure to use the <a href="Screen" class="uri">Screen</a>(‘DrawTextures’, …); function properly to<br />
draw many different gratings simultaneously - this is much faster!</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychGLImageProcessing/CreateProceduralSineGrating.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychGLImageProcessing/CreateProceduralSineGrating.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychGLImageProcessing/CreateProceduralSineGrating.m</code></p>
</div>
