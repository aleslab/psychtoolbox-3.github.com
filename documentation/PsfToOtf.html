<h2 id="psychtoolbox-psychoptics">[[Psychtoolbox]] › [[PsychOptics]]</h2>
<p>Convert a 2D point spread function to a 2D optical transfer fucntion.<br />
[xSfGridCyclesDeg,ySfGridCyclesDeg,otf] = <a href="PsfToOtf" class="uri">PsfToOtf</a>([xGridMinutes,yGridMinutes],psf,varargin)</p>
<p>Converts a point spread function specified over two-dimensional<br />
positions in minutes to a optical transfer function specified over<br />
spatial frequency in cycles per degree. For human vision, these are<br />
each natural units.</p>
<p>The input positions should be specified in matlab’s grid matrix format<br />
and x and y should be specified over the same spatial extent and with<br />
the same number of evenly spaced samples. Position (0,0) should be at<br />
location floor(n/2)+1 in each dimension. The OTF is returned with<br />
spatial frequency (0,0) at location floor(n/2)+1 in each dimension.</p>
<p>Spatial frequencies are returned using the same conventions.</p>
<p>If you want the spatial frequency representation to have frequency<br />
(0,0) in the upper left, as seems to be the more standard Matlab<br />
convention, apply ifftshift to the returned value. That is<br />
otfUpperLeft = ifftshift(otf);<br />
And then if you want to put it back in the form for passing to our<br />
<a href="OtfToPsf" class="uri">OtfToPsf</a> routine, apply fftshift:<br />
otf = fftshift(otfUpperLeft);<br />
The isetbio code (isetbio.org) thinks about <a href="OTFs" class="uri">OTFs</a> in the upper left<br />
format, at least for its optics structure, which is one place where<br />
you’d want to know this convention.</p>
<p>No normalization is performed. If the phase of the OTF are very small<br />
(less than 1e-10) the routine assumes that the input psf was spatially<br />
symmetric around the origin and takes the absolute value of the<br />
computed otf so that the returned otf is real.</p>
<p>We wrote this rather than simply relying on Matlab’s potf2psf/psf2otf<br />
because we don’t understand quite how that shifts position of the<br />
passed psf and because we want a routine that deals with the<br />
conversion of spatial support to spatial frequency support.</p>
<p>If you pass the both position args as empty, both sf grids are<br />
returned as empty and just the conversion on the OTF is performed.</p>
<p><a href="PsychOpticsTest" class="uri">PsychOpticsTest</a> shows that this works very well when we go back and<br />
forth for diffraction limited OTF/PSF. But not exactly exactly<br />
perfectly. A signal processing maven might be able to track down<br />
whether this is just a numerical thing or whether some is some small<br />
error, for example in how position is converted to sf or back again in<br />
the <a href="OtfToPsf" class="uri">OtfToPsf</a>.</p>
<p>See also <a href="OtfToPsf" class="uri">OtfToPsf</a>, <a href="PsychOpticsTest" class="uri">PsychOpticsTest</a>.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychOptics/PsfToOtf.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychOptics/PsfToOtf.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychOptics/PsfToOtf.m</code></p>
</div>
