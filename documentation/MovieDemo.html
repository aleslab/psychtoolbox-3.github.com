<h2 id="psychtoolbox-psychdemos">[[Psychtoolbox]] › [[PsychDemos]]</h2>
<p><a href="MovieDemo" class="uri">MovieDemo</a></p>
<p>Show a movie, easy as pie.</p>
<p>The comments below review the difference between the OS 9 version of<br />
the toolbox and PTB-3.</p>
<h3 id="new-and-different-on-os-psychtoolbox">New and different on OS Psychtoolbox:</h3>
<p>The OS 9 Psychtoolbox is based on <a href="QuickTime" class="uri">QuickTime</a> and PTB-3 is<br />
based on <a href="OpenGL" class="uri">OpenGL</a>. Differences between these underlying graphics libraries<br />
have unavoidably resulted in differences between the OS 9 and PTB-3<br />
versions of <a href="Screen" class="uri">Screen</a>; Some subfunctions of OS 9 <a href="Screen" class="uri">Screen</a> are replaced by<br />
similar, but not identical functions in PTB-3.</p>
<p>In OS 9: In PTB-3</p>
<p><a href="WaitBlanking" class="uri">WaitBlanking</a> <a href="Flip" class="uri">Flip</a><br />
<a href="PutImage" class="uri">PutImage</a> <a href="MakeTexture" class="uri">MakeTexture</a><br />
<a href="CopyWindow" class="uri">CopyWindow</a> <a href="DrawTexture" class="uri">DrawTexture</a></p>
<p><a href="WaitVBL" class="uri">WaitVBL</a> vs. <a href="Flip" class="uri">Flip</a></p>
<p>In OS 9 an onscreen window consisted of only one buffer: the front<br />
buffer. Any pixel drawn to an onscreen window would automatically<br />
appear on the display as soon as the monitor scan passed that pixel,<br />
the maximum delay between drawing a pixel and its appearnce on the<br />
monitor being one frame period. To prevent vertical shearing of<br />
animated displays, Psyhctoolbox scripts called <a href="WaitBlanking" class="uri">WaitBlanking</a> before<br />
updating the display. <a href="WaitBlanking" class="uri">WaitBlanking</a> synchonrized drawing into vide RAM<br />
wih the monitor scan by delaying the onset of drawing until the scan<br />
reached the bottom right corener of the display, at which point a<br />
vertical blank would occur while the CRT beam retraced to the upper<br />
left corner of the display.</p>
<p>In contrast, PTB-3 onscreen windows by default have not one but two<br />
buffers: the front buffer and the back buffer. In double-buffered<br />
mode, all <a href="Screen" class="uri">Screen</a> drawing commands are issued to the back buffer, where<br />
what is drawn is hidden from view. The contents of the back buffer<br />
remain hidden from view until The <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’, …) command is<br />
issued. <a href="Flip" class="uri">Flip</a> waits until the vertical retrace and then interchages the<br />
contents of the front and back buffers, bringining into view on the<br />
display what had previosly been hidden in the back buffer.</p>
<p><a href="OpenOffscrenWindow" class="uri">OpenOffscrenWindow</a> + <a href="PutImage" class="uri">PutImage</a> + <a href="CopyWindow" class="uri">CopyWindow</a> vs. <a href="MakeTexture" class="uri">MakeTexture</a> + <a href="DrawTexture" class="uri">DrawTexture</a></p>
<p>In OS 9, <a href="PutImage" class="uri">PutImage</a> copied a MATLAB matrix into an offsceen window. The<br />
offscreen Window could then be quickly copied to the display during an<br />
animation. Thus <a href="PutImage" class="uri">PutImage</a> was one part of three for quickly<br />
displaying MATLAB matrices during an animation:</p>
<pre><code>  Steps to quickly display an image matrix in OS 9:  
    1. Create an offscreen window by calling [OpenOffscreenWindow](OpenOffscreenWindow)  
    2. Copy the matrix to an offsceen window using [PutImage](PutImage)  
    3. Copy the offscreen window to an onscreen window using  
    [CopyWindow](CopyWindow)  </code></pre>
<p>Instead of using Offscreen Windows to quickly display MATLAB Matrices<br />
the OSX Psychtoolbox uses Textures.</p>
<pre><code>  Steps to quickly display an image matrix in PTB-3:    
    1. Create a texture and copy into it a matrix by using [MakeTexture](MakeTexture)  
    2. Copy the texture quickly to the onscreen window using  
    [DrawTexure](DrawTexure)  </code></pre>
<p>What is the difference betwen offscreen windows and textures? The<br />
difference is that Drawing commands such as <a href="FillOval" class="uri">FillOval</a> may be issued to<br />
offscreen windows but not to Textures; You may only fill textures by<br />
using matrices.</p>
<p>How do we draw ovals during an animation if we can not store them<br />
within offscren or textures? Unlike <a href="QuickDraw" class="uri">QuickDraw</a>, <a href="OpenGL" class="uri">OpenGL</a> is fast enought<br />
to render all drawing commands directly to the display during an<br />
animation loop. Except for MATLAB matrices stored in textures, there<br />
should be no need to prerender and buffer what is displayed during<br />
animation.</p>
<p>Animation loops: OS 9 VS PTB-3</p>
<p>To understand the differences between OS 9 and PTB-3 <a href="Screen" class="uri">Screen</a> its helpful<br />
to compare animation loops:</p>
<h3 id="os-9">OS 9:</h3>
<pre><code>  %create and fill offscreen windows here...   
  for i=1:numberOfMovieFrames  
      [Screen](Screen)(window, &#39;WaitBlanking&#39;);  
      [Screen](Screen)(&#39;CopyWindow&#39;, offscreenWindow(i), window);  
  end  </code></pre>
<h3 id="ptb-3">PTB-3:</h3>
<pre><code>  %generate textures here...  
  for i=1:numberOfMovieFrames  
      [Screen](Screen)(&#39;DrawTexture&#39;, texture(i), window);  
      [Screen](Screen)(window, &#39;[Flip](Flip)&#39;);  
  end  </code></pre>
<p>See also: <a href="DriftDemo" class="uri">DriftDemo</a>, <a href="PsychDemos" class="uri">PsychDemos</a>.</p>
<h3 id="history">HISTORY</h3>
<p>7/3/04 awi Wrote it. Based on Denis Pelli’s <a href="MovieDemo" class="uri">MovieDemo</a> for OS 9.<br />
7/19/04 awi restored <a href="Priority" class="uri">Priority</a>, and time tests, added option to plot results.<br />
7/24/04 awi Cosmetic<br />
9/8/04 awi Added Try/Catch.<br />
4/23/05 mk Added <a href="Priority" class="uri">Priority</a>(0) to Catch-Section.<br />
11/19/06 dhb Remove OSX from name.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDemos/MovieDemo.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDemos/MovieDemo.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDemos/MovieDemo.m</code></p>
</div>
