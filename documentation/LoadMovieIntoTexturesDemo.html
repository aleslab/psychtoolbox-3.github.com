<h2 id="psychtoolbox-psychdemos-moviedemos">[[Psychtoolbox]] › [[PsychDemos]] › [[MovieDemos]]</h2>
<p><a href="LoadMovieIntoTexturesDemo" class="uri">LoadMovieIntoTexturesDemo</a>(moviename [, fromTime=0][, toTime=end][, indexisFrames=0][, benchmark=0][, async=0][, preloadSecs=1][, specialflags=0][, pixelFormat=4])</p>
<p>A demo implementation on how to load a movie into standard<br />
Psychtoolbox textures for precisely controlled presentation timing and<br />
presentation order.</p>
<p>Parameters:<br />
moviename - Filename of moviefile to use. If none is provided, then the<br />
simple <a href="DualDiscs" class="uri">DualDiscs</a> collision movie is used which is part of PTB.</p>
<p>fromTime - Start time (in seconds) from which the movie should be read<br />
into textures. Defaults to start of movie, if not provided.</p>
<p>toTime - End time (in seconds) upto which the movie should be read<br />
into textures. Defaults to end of movie, if not provided.</p>
<p>indexIsFrames - If set to 1 then the fromTime and toTime parameters are<br />
interpreted as frameindex (starting with 0 for the first frame), instead<br />
of seconds. If set to 2 then presentation timestamps are ignored for the<br />
decision when to stop loading a movie. This is needed for certain movies<br />
with a broken encoding of time, as those would stop loading way too early<br />
otherwise.</p>
<p>benchmark - If you set this parameter to 1, the demo will compute the<br />
time it takes to load the movie, and - after the movie has been loaded<br />
into textures - the maximum display speed without syncing to vertical<br />
refresh. All visual progress feedback is disabled. This is mostly<br />
useful to benchmark different movie file formats and codecs for their<br />
relative efficiency on a given machine. A setting of 2 will additionally<br />
disable test of abort keys during loading of the movie - to discount<br />
possible pollution of the benchmark results with time spent checking the<br />
keyboard. A setting of 3 will also skip keyboard queries during the load<br />
phase, additionally it will not queue up textures in video memory, but<br />
instead load a texture and then immediately discard it. This is more<br />
resembling typical movie playback, where a frame is pulled, presented on<br />
screen, then discarded. It tests a different decoding path in <a href="Screen" class="uri">Screen</a>(). A<br />
setting of 4 will only test decoding performance of the movie, but omit<br />
creation of actual Psychtoolbox textures for presentation. This allows to<br />
separate computation time spent in the video decoder from time consumed<br />
by the graphics driver or graphics card.</p>
<p>async - If you set this parameter to 4, the video decoding engine will<br />
prebuffer frames ahead of time, up to ‘preloadSecs’ seconds worth of<br />
video data. This is unsuitable for playback with audio-video sync, but<br />
for pure video playback it can decouple decoding from presentation<br />
further and provide a potential performance boost for very demanding<br />
playback scenarios.</p>
<p>preloadSecs - How many seconds of video to prebuffer if async == 4?<br />
Specify a maximum amount in seconds, or the value -1 for unlimited<br />
prebuffering.</p>
<p>specialflags - Special flags for ‘OpenMovie’. E.g., a setting of 1 will<br />
try to use YUV textures for higher performance, if the installed graphics<br />
card supports this. A setting of 4 will always use YUV decoding, by use<br />
of out own builtin YUV decoder, which may be more limited in<br />
functionality and flexibility, but helpful if highest performance is a<br />
requirement.</p>
<p>pixelFormat - Format of video texture to create: 1 = Luminance/Grayscale<br />
only, 2 = Luminance+Alpha, 3 = RGB color, 4 = RGBA, 5 = YUV-422 packed<br />
pixel, 6 = YUV-I420 planar format. 5 and 6 = Y8-Y800 planar luminance<br />
only format. Not all formats are supported by all GPU’s, operating<br />
systems and video codecs. Defaults to 4 = RGBA 8 Bit per color channel.</p>
<p>How the demo works: Read the source code - its well documented ;-)</p>
<p>This demo “preloads” the movie into textures:<br />
The whole movie gets read into PTB textures before start of trial. Then<br />
you show the textures in quick succession like in <a href="PlayMoviesDemo" class="uri">PlayMoviesDemo</a>. The<br />
advantage of this approach is exact control over display timing and<br />
display order: You can show frames in any order you like at any rate you<br />
like (and that your hardware likes). Disadvantage: Longer trial<br />
setup time for loading the whole movie, higher memory consumption (keep<br />
all n frames in memory instead of only the current one) and the inability<br />
to play sound in sync with video.</p>
<p>To make it a bit more interesting, you can use this demo to “browse” short<br />
videoclips, e.g., for selection of interesting parts…</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDemos/MovieDemos/LoadMovieIntoTexturesDemo.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDemos/MovieDemos/LoadMovieIntoTexturesDemo.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDemos/MovieDemos/LoadMovieIntoTexturesDemo.m</code></p>
</div>
