<h2 id="psychtoolbox-psychhardware">[[Psychtoolbox]] › [[PsychHardware]]</h2>
<p><a href="CMCheckInit" class="uri">CMCheckInit</a>([meterType], [<a href="PortString" class="uri">PortString</a>])</p>
<p>Initialize the color meter. The routine calls the<br />
lower level routines for given ‘meterType’. If the low level routine<br />
fails, this routine retries, then prompts the user to take appropriate<br />
action. If the low level routine succeeds, this<br />
routine is silent.</p>
<h3 id="the-following-colormeters-are-supported">The following colormeters are supported:</h3>
<p>meterType 1 is the PR650 (default)<br />
meterType 2 is the CVI (need <a href="CVIToolbox">CVIToolbox)</a>) - Not yet implemented!<br />
meterType 3 is the CRS Colorimeter<br />
meterType 4 is the PR655<br />
meterType 5 is the PR670<br />
meterType 6 is the PR705</p>
<p>For the PR-series colorimeters, ‘PortString’ is the optional name of a<br />
device string for the serial port or Serial-over-USB port to which the<br />
device is connected. If none is given, the routine uses different files<br />
and built-in defaults to try to find the proper port: If there is a file<br />
‘CMPreferredPort.txt’ in the search path of Matlab/Octave, it will parse<br />
that file for a <a href="PortString" class="uri">PortString</a> to use. Else it will use a hard-coded default<br />
inside this routine.</p>
<p>If a calibration file with name ‘PRXXXPorts’ for the PR-XXX exists,<br />
it will override what is in <a href="CMPrefferedPort" class="uri">CMPrefferedPort</a>.txt. There are two<br />
possible formats for the structure in this file.<br />
If the structure has a <a href="PortString" class="uri">PortString</a> field, this is passed to<br />
routine <a href="FindSerialPort" class="uri">FindSerialPort</a> to get the actual port. Otherwise,<br />
if the structure has a .in field, this string is used directly.</p>
<p>Other Colorimeters, e.g., CRS <a href="ColorCal" class="uri">ColorCal</a>, have their own specific setup<br />
methods and this routine just calls their setup code with default<br />
settings.</p>
<p>9/15/93 dhb Modified to use new <a href="CMInit" class="uri">CMInit</a> properly.<br />
1/18/94 jms Added gHardware switch<br />
1/24/94 dhb Changed sign of gHardware switch.<br />
2/20/94 dhb Call through CMETER rather than CM… routines.<br />
4/4/00 dhb Optional port name, only used on SERIAL version.<br />
9/11/00 dhb Added meterType.<br />
1/4/02 dhb, ly Try to get OS9 version to work with Megawolf board and SERIAL.<br />
1/10/02 dhb, ly Change calling convention. Remove passing of port, but read<br />
port from a “calibration” file in <a href="PsychCalLocalData" class="uri">PsychCalLocalData</a> if it’s there.<br />
4/13/02 dgp Cosmetic.<br />
2/26/03 dhb Add CRS Colorimeter, change meter type of PR-650 to 1.<br />
10/05/06 dhb, cgb OSX version.<br />
11/27/07 mpr replaced hard coded portNameIn with <a href="FindSerialPort" class="uri">FindSerialPort</a> for OS X, and<br />
attempted to make this more robust and user-friendly.<br />
modifications tested only on Mac OS 10.5.1, Matlab 2007b, on<br />
a Mac Pro. Other systems may require more tinkering…<br />
2/07/09 mk, tbc Add PR-655 support.<br />
2/07/09 mk Add experimental setup code for use of <a href="IOPort" class="uri">IOPort</a> instead of <a href="SerialComm" class="uri">SerialComm</a>.<br />
2/11/09 cgb,mk Small fixes: Now we use <a href="IOPort" class="uri">IOPort</a> instead of <a href="SerialComm" class="uri">SerialComm</a> –<br />
by default. Verified to work for both PR650 and PR655 toolboxes.<br />
7/16/12 dhb Choose right global default for 64-bit Matlab. Hope I<br />
did this in a way that doesn’t break anything else.<br />
7/20/12 dhb Undid 7/16/12 change. Error was due to a stale <a href="IOPort" class="uri">IOPort</a> on my path<br />
12/04/12 zlb Adding PR-705 support.<br />
4/10/13 dhb More flexible behavior supported via <a href="PRXXXPorts" class="uri">PRXXXPorts</a> calibration file.<br />
1/25/13 dhb, ms More info printed on failure for PR-670 case. Trying to track down intermittant<br />
failures to initialize when routine is called multiple times in a long calibration loop.<br />
6/11/17 mk Remove dead <a href="SerialComm" class="uri">SerialComm</a>() driver path.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychHardware/CMCheckInit.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychHardware/CMCheckInit.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychHardware/CMCheckInit.m</code></p>
</div>
