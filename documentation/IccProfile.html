<h2 id="psychtoolbox-psychcal">[[Psychtoolbox]] › [[PsychCal]]</h2>
<p>icc=<a href="IccProfile" class="uri">IccProfile</a>(command,file,icc)</p>
<p>UNIMPLEMENTED! This function is not yet available in Psychtoolbox-3.<br />
Porting it from the old Psychtoolbox-2 should be doable for somebody<br />
with basic C programming skills. If you feel like contributing this<br />
function, please do so!</p>
<p><a href="IccProfile" class="uri">IccProfile</a>.mex will read any ICC or <a href="ColorSync" class="uri">ColorSync</a> profile. The<br />
International Color Consortium (ICC) published a standard file<br />
format for saving color calibration data for imaging devices. This<br />
includes digital cameras, scanners, printers, and monitors. Users<br />
of the Psychophysics Toolbox will be primarily interested in the<br />
use of an ICC Profile to characterize their CRT monitor or LCD<br />
display. The idea is that the file contains all the necessary<br />
information to transform the specification of a color in a standard<br />
perceptual space (e.g. CIE X,Y,Z) into the numbers necessary to<br />
display that color.<br />
web http://www.color.org/profiles.html ;</p>
<h3 id="usage">USAGE:</h3>
<p>icc=<a href="IccProfile" class="uri">IccProfile</a>(‘Read’,file) % Gets data into Matlab.<br />
folder=<a href="IccProfile" class="uri">IccProfile</a>(‘Folder’) % <a href="ColorSync" class="uri">ColorSync</a> Profiles folder<br />
file=<a href="IccProfile" class="uri">IccProfile</a>(‘Filename’,screenNumber,newfile) % Get/set screen’s profile.<br />
<a href="IccProfile" class="uri">IccProfile</a>(‘ShortDump’,file,<a href="#tag">tag</a>) % For exploring.<br />
<a href="IccProfile" class="uri">IccProfile</a>(‘Dump’,file,<a href="#tag">tag</a>) % &quot;&quot;<br />
<a href="IccProfile" class="uri">IccProfile</a>(‘LongDump’,file,<a href="#tag">tag</a>) % &quot;&quot;</p>
<p>“file” is a filename, a partial or complete path, for an ICC<br />
Profile file. The default folder is the <a href="ColorSync" class="uri">ColorSync</a> Profiles<br />
folder (in the System Folder).<br />
“icc” is a Matlab struct.<br />
“folder” path string gives location of <a href="ColorSync" class="uri">ColorSync</a> Profiles folder.<br />
“tag” is a four-character string identifying a chunk of<br />
information in the icc profile, e.g. ‘rTRC’ for the red<br />
Tone Reproduction Curve (i.e. gamma curve for red phosphor)<br />
or ‘gXYZ’ for the the X,Y,Z color coordinates of the green<br />
phosphor.<br />
‘Read’ returns a Matlab struct with one field for each tag in the<br />
profile. The field will still be present, but empty, if the<br />
tag is of an unknown type, or if an error was encountered in<br />
reading the tag. (Use ‘Dump’ to diagnose.) ‘Read’ recognizes<br />
most of the tag types relevant to monitor calibration.<br />
‘Folder’ returns the path (a string) for the <a href="ColorSync" class="uri">ColorSync</a> Profiles folder.<br />
Use DIR<a href="(IccProfile)(&#39;Folder&#39;)">(IccProfile</a> to get a list of files there.<br />
‘Filename’ get and/or set the filename of the profile associated with your<br />
screen. Or use the Monitors control panel (go to color) to choose.<br />
Note that setting the file has the side effect of loading<br />
the video card’s gamma table from the ‘vcgt’, if present in<br />
your profile.<br />
‘Dump’ describes every tag in the profile. Or just one tag.<br />
‘ShortDump’ describes every tag in the profile, with less detail.<br />
‘LongDump’ describes every tag in the profile, with more detail.</p>
<h3 id="example">EXAMPLE:</h3>
<p>file=iccprofile(‘filename’,0)<br />
icc=iccprofile(‘read’,file)</p>
<p>This will read all the information in the profile associated with<br />
screen 0 (the main screen) and provide it to you as a handy Matlab struct<br />
“icc” that you can use in your software. For explanation of the contents,<br />
consult the official ICC documentation, plus Apple’s documentation of<br />
their custom tags: ‘vcgt’ and ‘mmod’.<br />
web http://www.color.org/profiles.html ;<br />
web http://developer.apple.com/techpubs/macos8/<a href="MultimediaGraphics" class="uri">MultimediaGraphics</a>/<a href="ColorSyncManager" class="uri">ColorSyncManager</a>/<a href="ManagingColorWithColorSync" class="uri">ManagingColorWithColorSync</a>/<a href="ColorSync" class="uri">ColorSync</a>.7b.html</p>
<h3 id="explanation-of-tag-type">EXPLANATION OF TAG TYPE:</h3>
<p>Most of the information in a profile is stored as chunks of data,<br />
called elements. Each element has a unique 4-character tag name and<br />
a 4-character tag type. <a href="IccProfile" class="uri">IccProfile</a> accepts every tag name, and<br />
installs a corresponding field in your icc struct, with the same<br />
name (e.g. ‘desc’). However, <a href="IccProfile" class="uri">IccProfile</a> will be able to transfer the<br />
content of the profile element to your struct only if <a href="IccProfile" class="uri">IccProfile</a><br />
recognizes the type. At present, <a href="IccProfile" class="uri">IccProfile</a> can read the following<br />
tag types:</p>
<p>NAME TYPE TAGS THAT USE IT.<br />
Profile description ‘desc’ ‘desc’<br />
Tone reproduction curve ‘curv’ ‘rTRC’,‘gTRC’,‘bTRC’,‘kTRC’<br />
X,Y,Z of a color ‘XYZ’ ‘rXYZ’,‘gXYX’,‘bXYZ’,‘wtpt’,‘bkpt’,‘lumi’<br />
Text string ‘text’ ‘cprt’<br />
Date and time ‘dtim’ ‘calt’<br />
Viewing conditions ‘view’ ‘view’<br />
Measurement type ‘meas’ ‘meas’<br />
Data (unformatted) ‘data’<br />
Unsigned 8-bit int array ‘ui08’<br />
Unsigned 16-bit int array ‘ui16’<br />
Unsigned 32-bit int array ‘ui32’<br />
Unsigned 64-bit int array ‘ui64’<br />
Unsigned 32-bit fixed array ‘uf32’<br />
Signed 32-bit fixed array ‘sf32’<br />
Video card gamma ‘vcgt’ ‘vcgt’<br />
Make and model ‘mmod’ ‘mmod’</p>
<h3 id="tag">TAG</h3>
<p>‘desc’ profile description, a human readable text string<br />
‘rTRC’ red tone reproduction curve<br />
‘gTRC’ green tone reproduction curve<br />
‘bTRC’ blue tone reproduction curve<br />
‘kTRC’ gray tone reproduction curve<br />
‘rXYZ’ red phosphor color<br />
‘gXYZ’ green phosphor color<br />
‘bXYZ’ blue phosphor color<br />
‘wtpt’ white point<br />
‘bkpt’ black point<br />
‘lumi’ luminance in cd/m^2<br />
‘cprt’ copyright<br />
‘calt’ calibration date and time<br />
‘view’ viewing conditions<br />
‘meas’ measurement type<br />
‘vcgt’ custom Apple tag for video card gamma table<br />
‘mmod’ custom Apple tag for make and model of the device</p>
<p>NOTE: <a href="IccProfile" class="uri">IccProfile</a> may report errors in an apparently good profile.<br />
This is because icclib enforces the ICC standard more strictly than<br />
<a href="ColorSync" class="uri">ColorSync</a> does, so it picks up errors that were previously missed.<br />
(On 7/31/00 we reported to Apple two such errors, affecting most of their<br />
<a href="ColorSync" class="uri">ColorSync</a> Profiles, and added a work-around to <a href="IccProfile" class="uri">IccProfile</a>.)<br />
You can try running Apple’s “Profile First Aid”, which detects and<br />
fixs some common profile errors, though it too is less strict than<br />
icclib. “Profile First Aid” 3.0.1 is installed in the Apple<br />
Extras:<a href="ColorSync" class="uri">ColorSync</a> Extras folder when you install <a href="ColorSync" class="uri">ColorSync</a> 3.0.1<br />
web http://asu.info.apple.com/swupdates.nsf/artnum/n11674 ;</p>
<h3 id="calibration">CALIBRATION:</h3>
<p>You can buy a calibration package consisting of a program (e.g.<br />
<a href="ColorBlind" class="uri">ColorBlind</a> <a href="ProveIt" class="uri">ProveIt</a>! or Monaco <a href="EZColor">EZColor)</a>) and a simple colorimeter to<br />
easily create an ICC profile for your monitor. Using <a href="IccProfile" class="uri">IccProfile</a>.mex,<br />
it should be easy to use that calibration data to do your color<br />
corrections, but we haven’t actually tried that yet. Here are a few<br />
calibrators that seems to be good, from what we’ve read. We’ve<br />
included links to the manufacturer (if available) and to Jon Cone’s<br />
inkjetmall web site because he knows a lot about digital<br />
printing and has good advice about choosing among these products.</p>
<p><a href="ColorBlind" class="uri">ColorBlind</a> <a href="ProveIt" class="uri">ProveIt</a>! software $50<br />
Does not include colorimeter. Can be used alone, using perceptual<br />
matching, or with the Sequel Chroma 4 colorimeter, below.<br />
web http://www.color.com/Products/proveit.html ;<br />
web http://www.inkjetmall.com/store/prove-it.html ;</p>
<p>Sequel Chroma 4 CRT &amp; LCD monitor colorimeter $249<br />
Requires software, which is not included. Compatible with <a href="ColorBlind" class="uri">ColorBlind</a><br />
and Monaco.<br />
web http://www.inkjetmall.com/store/measuring-devices.html#monitors ;</p>
<p>Monaco <a href="EZColor" class="uri">EZColor</a> software $299<br />
<a href="MonacoSENSOR" class="uri">MonacoSENSOR</a> colorimeter $249 (or both together for $499)<br />
web http://www.monacosys.com/monacoezcolor.html ;</p>
<p>The <a href="ColorBlind" class="uri">ColorBlind</a>+Sequel package, for $299, is cheaper than the $499<br />
Monaco package, and the <a href="ColorBlind" class="uri">ColorBlind</a> software seems to be at least as<br />
highly regarded as Monaco’s by Jon Cone and others using it to<br />
calibrate their monitors for critical digital color printing.</p>
<p>Denis Pelli</p>
<p>ACKNOWLEDGEMENT: <a href="IccProfile" class="uri">IccProfile</a>.mex is largely a Matlab interface to<br />
the excellent free icclib created in C by Graeme Gill, for which we<br />
are very grateful.<br />
web http://web.access.net.au/argyll/color.html ;</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychCal/IccProfile.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychCal/IccProfile.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychCal/IccProfile.m</code></p>
</div>
