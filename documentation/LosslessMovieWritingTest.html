<h2 id="psychtoolbox-psychtests">[[Psychtoolbox]] › [[PsychTests]]</h2>
<p><a href="LosslessMovieWritingTest" class="uri">LosslessMovieWritingTest</a> - Test lossless encoding and decoding of video in movie files.</p>
<p><a href="LosslessMovieWritingTest" class="uri">LosslessMovieWritingTest</a>([codec=huffyuv][, nrchannels=3][, bpc=8])</p>
<p>This test is meant to exercise <a href="Screen" class="uri">Screen</a>’s movie writing function with<br />
different [<a href="GStreamer" class="uri">GStreamer</a>][(GStreamer)]((GStreamer)) video codecs and to test if specific codecs are<br />
capable of encoding video without loss of information into a movie file.</p>
<p>The test creates a test image, encodes/writes it into a movie file, then<br />
reads it back from the movie file and then compares the original test<br />
image against the image read back from the movie. If lossless encoding<br />
worked, both images should be identical.</p>
<h3 id="optional-parameters">Optional parameters:</h3>
<p>‘codec’ name of video codec to use. Defaults to huffyuv, for use of the<br />
lossless <a href="FFMpeg" class="uri">FFMpeg</a> Huffman encoder. ffenc_ljpeg would be another option for<br />
a lossless codec, however ffenc_ljpeg can’t be decoded by Psychtoolbox’s<br />
[<a href="GStreamer" class="uri">GStreamer</a>][(GStreamer)]((GStreamer)) movie playback functions. Another lossless codec is<br />
‘ffenc_sgi’, which allows for lossless encoding and relatively high<br />
compression rates, but its movie files can only be read by Psychtoolbox,<br />
not by other tools.</p>
<p>‘nrchannels’ How many color channels to test: 1, 3, or 4 are possible<br />
values for grayscale, RGB or RGBA encoding with 8 bpc. For 16 bpc<br />
encoding, only 1 or 3 channels are possible. Note that most codecs can’t<br />
really encode the alpha channel and discard it instead, so nrchannels=4<br />
does not actually verify integrity of the alpha channel.</p>
<p>‘bpc’ Bitdepth for color encoding: 8 is the default, which should work.<br />
16 is the other allowed option for 16 bpc testing. Most codecs can’t<br />
encode 16 bpc though and will reduce precision to &lt;= 8 bpc. Check the<br />
code of this script to see how a Psychtoolbox proprietary 16 bpc encoding<br />
can be used to handle lossless 16 bpc, and how this can be decoded. Only<br />
Psychtoolbox can handle movies in this proprietary encoding, no other 3rd<br />
party tools! Other constraints for 16 bpc mode: 1 layer grayscale images<br />
must have a height for which height * 2/3 is an integral value. 3 layer<br />
RGB images must not be wider than 2048 pixels for use with most codecs.</p>
<p>This test script will write the - potentially huge - temporary test file<br />
into the current working directory and leave it there after the test!</p>
<p>Requires a GPU which can handle at least 4096 x 4096 pixel textures,<br />
otherwise test failure will occur. The GPU must also support floating<br />
point textures for &gt; 8 bpc tests.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychTests/LosslessMovieWritingTest.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychTests/LosslessMovieWritingTest.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychTests/LosslessMovieWritingTest.m</code></p>
</div>
