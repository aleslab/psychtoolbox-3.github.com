<h2 id="psychtoolbox-psychdemos">[[Psychtoolbox]] › [[PsychDemos]]</h2>
<p><a href="PanelFitterDemo" class="uri">PanelFitterDemo</a> - Demonstrate use of the panel fitter.</p>
<p>This demo shows how to use <a href="Screen" class="uri">Screen</a>()’s panel fitter function by using the<br />
high-level setup code in <a href="PsychImaging" class="uri">PsychImaging</a>().</p>
<p>The panelfitter allows to implement “rotated framebuffers”, which have a<br />
shape (width and height in pixels) that corresponds to a display device<br />
that is rotated by increments of 90 degrees with respect to its “natural”<br />
upright orientation (typically landscape). E.g., assume you have a flat<br />
panel with a natural landscape orientation - more wide than high - and a<br />
resolution of 1920 x 1080 pixels. Now for some reason you want to turn<br />
your panel into “portrait” orientation - more high than wide - by<br />
rotating it by 90 degrees. Drawing stimulus images for such a rotated<br />
display would be inconvenient, as everything would be shown tilted by 90<br />
degrees to your subject. Here the panelfitter can help by providing a<br />
framebuffer that is rotated by 90 degrees wrt. its normal shape, ie., the<br />
framebuffer is 1080 x 1920 pixels in size instead of its natural 1920 x<br />
1080 pixels. Drawing into such a framebuffer becomes natural and easy<br />
again, as the shape and orientation of the framebuffer corresponds to the<br />
effective shape and orientation of your display device.</p>
<p>Such rotations can be requested from the panelfitter by the<br />
<a href="PsychImaging" class="uri">PsychImaging</a>(‘AddTask’, ‘General’, ‘UseDisplayRotation’, angle); command.</p>
<p>Why not simply use the “Rotate display” buttons or settings in the<br />
display control GUI of your operating system? Because the method by which<br />
operating systems and graphics cards do implement that display rotation<br />
will usually severely interfere with visual stimulus onset timing and/or<br />
stimulus onset timestamping – you lose control over your stimulus<br />
presentation timing. Our panelfitter makes sure timing stays under<br />
control.</p>
<p>Another application of the panelfitter is if you want to operate your<br />
flat panel or video projector at a different resolution or image size<br />
than its native resolution. Good old CRT monitors didn’t have a native<br />
resolution, they were happy to display at a wide range of different<br />
resolutions and refresh rates. Modern flat panels and projectors do have<br />
only one true native resolution, which is their maximum resolution, due<br />
to their fixed pixel grid. If you want to set such a display to a<br />
different resolution, your graphics hardware or display device will use<br />
digital image processing to scale and resize the input video signal from<br />
its set resolution to the native resolution of the device. This<br />
introduces lag due to processing delays, and possibly non-deterministic<br />
timing variance in visual stimulus onset, therefore you should avoid such<br />
non-native resolutions and run your displays at native (maximum)<br />
resolution. If you still want to display stimulus images at a different<br />
size than the panels native resolution, the panelfitter can help you. It<br />
provides you with a framebuffer of selectable size and then performs the<br />
scaling and resizing of the stimulus image in that framebuffer to the<br />
true size of the panels framebuffer resolution. In other words, it fits<br />
the content onto the panel, hence the name “panelfitter”. You can use the<br />
<a href="PsychImaging" class="uri">PsychImaging</a>(‘AddTask’, ‘General’, ‘UsePanelFitter’, fitSize, ‘Centered’);<br />
command to define the size of your framebuffer (‘fitSize’) and the<br />
strategy for placing and scaling the image onto the panel.</p>
<p>Again, operating systems allow you to select different resolutions and<br />
fitting modes in their display GUI controls, but the methods by which<br />
non-native resolutions and fittings are implemented by current operating<br />
systems and graphics cards can severely interfere with stimulus onset<br />
timing and timestamping, or with low level stimulus properties, due to<br />
the digital filtering, resampling and blurring involved. Our panelfitter<br />
prevents timing artifacts and gives you more control over other<br />
properties.</p>
<h3 id="please-note-that-use-of-our-panelfitter-is-also-not-totally-free">Please note that use of our panelfitter is also not totally free:</h3>
<ol type="a">
<li><p>Currently display rotation and image scaling don’t go well together.<br />
One or the other works well, but both combined can exhibit bugs and<br />
artifacts. These are limitations of our current high-level setup code.<br />
You could probably use the <a href="Screen" class="uri">Screen</a>(‘PanelFitter’) low-level setup<br />
command directly to get a well working solution for your specific<br />
needs, should you require scaling and rotation at the same time. Or<br />
you could fix and extend our high-level setup code in <a href="PsychImaging" class="uri">PsychImaging</a>.m.</p></li>
<li><p>Multisample anti-aliasing does not work together with display rotation<br />
on older graphics hardware, or with Apple OSX versions up to and<br />
including 10.9 “Mavericks”. It will work on modern GPU’s under Linux<br />
or Windows if they at least support <a href="OpenGL" class="uri">OpenGL</a> 3.2, but not on the same<br />
GPU’s under OSX, as this is a purely political restriction introduced<br />
by Apple, making OSX less useful than it could be.</p></li>
<li><p>There is a small performance impact on the order of &lt; 1 millisecond<br />
per <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’) with modern graphics cards due to the processing<br />
involved.</p></li>
</ol>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDemos/PanelFitterDemo.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDemos/PanelFitterDemo.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDemos/PanelFitterDemo.m</code></p>
</div>
