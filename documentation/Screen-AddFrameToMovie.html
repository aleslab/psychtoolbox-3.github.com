<h1 id="screenaddframetomovie"><a href="Screen-AddFrameToMovie">Screen(‘AddFrameToMovie’)</a></h1>
<h2 id="psychtoolbox-screen.mexdll-subfunction">[[Psychtoolbox]] › [[Screen]].{mex*,dll} subfunction</h2>
<p>Get an image from a window or texture and add it as a new video frame to a<br />
movie.</p>
<p>Calling this function on an onscreen window while an asynchronous flip is<br />
pending on the window due to <a href="Screen" class="uri">Screen</a>(‘AsyncFlipBegin’) is not allowed. Finalize<br />
such flips first. Readback of other onscreen or offscreen windows or textures is<br />
possible during async flip, but discouraged because it will have a significant<br />
impact on performance.</p>
<p>“windowPtr” is the handle of the onscreen window, offscreen window or texture<br />
whose image should be added.</p>
<p>“rect” is the rectangular subregion to get, and its default is the whole window.<br />
The function will only honor the top-left corner of the ‘rect’ argument, but<br />
ignore the bottom-right corner and thereby the width and height as defined by<br />
the ‘rect’. The size of added video frames is fully defined as the fixed size of<br />
movie frames as specified at movie creation time via the <a href="Screen" class="uri">Screen</a>(‘CreateMovie’)<br />
call. The specified image region must be fully contained inside the window.</p>
<p>“bufferName” is a string specifying the buffer from which to copy the image: The<br />
‘bufferName’ argument is meaningless for offscreen windows and textures and will<br />
be silently ignored. For onscreen windows, it defaults to ‘frontBuffer’, i.e.,<br />
it returns the image that is sent through the video output of your graphics card<br />
to your display device at that moment. On <a href="OpenGL" class="uri">OpenGL</a>-ES graphics hardware, all<br />
‘bufferName’ settings except ‘backBuffer’ or ‘drawBuffer’ will be ignored and<br />
image data is always read from either the ‘drawBuffer’ or the ‘backBuffer’. This<br />
is an unavoidable system limitation of such embedded hardware.<br />
If frame-sequential stereo mode is enabled, ‘frontLeftBuffer’ returns the image<br />
generated for the left eye, ‘frontRightBuffer’ returns the right-eye view. If<br />
double-buffering is enabled, you can also return the ‘backBuffer’, i.e. what<br />
your subject will see after the next <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’) command, and for<br />
frame-sequential stereo also ‘backLeftBuffer’ and ‘backRightBuffer’<br />
respectively. Both the ‘frontBuffer’ and ‘backBuffer’ images and their stereo<br />
variants will return the final images as they are really encoded in the system<br />
framebuffer and sent to the video outputs of your graphics hardware. These<br />
images are the result of any post-processing done by the Psychtoolbox imaging<br />
pipeline, e.g., Retina display processing, geometric transformations, color<br />
transformations, certain types of gamma correction, stereo post-processing, or<br />
special pixel encoding for devices like Bits# or Datapixx. As such they may<br />
differ in size and format from what you have drawn into the onscreen window.<br />
‘aux0Buffer’ - ‘aux3Buffer’ returns the content of <a href="OpenGL" class="uri">OpenGL</a> AUX buffers 0 to 3.<br />
Only query the AUX buffers if you know what you are doing, otherwise your script<br />
will crash. This is mostly meant for internal debugging of PTB.<br />
If the imaging pipeline is enabled, you can also return the content of the<br />
unprocessed backbuffer, ie. before processing by the pipeline, by requesting<br />
‘drawBuffer’.<br />
If the imaging pipeline is enabled, querying the ‘backBuffer’ will only give you<br />
up to date results after you called <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’) or <a href="Screen" class="uri">Screen</a>(‘AsyncFlipBegin’)<br />
or <a href="Screen" class="uri">Screen</a>(‘DrawingFinished’), otherwise you may encounter stale results. If our<br />
own homegrown frame-sequential stereo mode is in use, querying the<br />
‘backLeftBuffer’ and ‘backRightBuffer’ is well defined, after a <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’)<br />
or <a href="Screen" class="uri">Screen</a>(‘DrawingFinished’), but querying the ‘frontLeftBuffer’ or<br />
‘frontRightBuffer’ or ‘frontBuffer’ will result in an assignment of left- and<br />
right- stereo images that is mostly based on chance, e.g., you may get<br />
accidentally swapped left- and rightBuffer images!</p>
<p>“moviePtr” is the optional handle to the movie to which the video frame should<br />
be added. You can get this handle from the <a href="Screen" class="uri">Screen</a>(‘CreateMovie’) function when<br />
creating the movie. By default frames are added to the first movie created with<br />
<a href="Screen" class="uri">Screen</a>(‘CreateMovie’).</p>
<p>“frameduration” optionally defines the display duration of the added video frame<br />
in units of movie frame intervals. See the help for ‘CreateMovie’ for further<br />
explanation of “frameduration”.</p>
<p>Movie images are stored with 8 bits or 16 bits resolution per pixel color<br />
component. Images are stored as one (RED), three (RGB) or four channel (RGBA)<br />
frames. The number of channels and bitdepth is selected in the<br />
<a href="Screen" class="uri">Screen</a>(‘CreateMovie’) call and then kept fixed throughout the movie. <a href="OpenGL" class="uri">OpenGL</a>-ES<br />
hardware only supports 8 bit storage in RGB or RGBA. Not all video codecs allow<br />
for lossless encoding or encoding of all color channels.</p>
<p>See <a href="Screen" class="uri">Screen</a>(‘CreateMovie?’) for help on movie creation.</p>
<p>&lt;&lt;=====See also:===== PutImage CopyWindow CreateMovie FinalizeMovie &lt;&lt;</p>
