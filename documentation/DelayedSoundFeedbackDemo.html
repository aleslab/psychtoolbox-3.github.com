<h2 id="psychtoolbox-psychdemos">[[Psychtoolbox]] › [[PsychDemos]]</h2>
<p><a href="DelayedSoundFeedbackDemo" class="uri">DelayedSoundFeedbackDemo</a>([reqlatency=150 ms][, duplex=0][, freq = 48000][, minLatency= 10 ms])</p>
<h3 id="caution-test-timing-of-this-script-with-measurement-equipment-if-you">CAUTION: TEST TIMING OF THIS SCRIPT WITH MEASUREMENT EQUIPMENT IF YOU</h3>
<p>DEPEND ON ACCURATE FEEDBACK TIMING!!!</p>
<p>Demonstrates usage of the new Psychtoolbox sound driver <a href="PsychPortAudio" class="uri">PsychPortAudio</a>()<br />
for audio feedback with a controlled delay.</p>
<p>Sound is captured from the default recording device and then - with a<br />
selectable delay - played back via the default output device.</p>
<h3 id="parameters-and-their-meaning">Parameters and their meaning:</h3>
<p>‘reqlatency’ Wanted feedback latency between sound input and output in<br />
milliseconds. A value of zero will ask for the lowest possible latency on<br />
the given setup. Defaults to 150 msecs. Please notice that the minimum<br />
achievable latency will be constrained by the capabilities of your<br />
operating system, sound card driver, computer hardware and sound<br />
hardware. Only very high quality systems will be able to go below 5 msecs<br />
latency, good systems will be able to go below 20 msecs, but less capable<br />
setups may only allow for a latency much larger than 20 msecs. In order<br />
to achieve low latency reliably without timing glitches or audible<br />
artifacts, you may need to tune both the parameters for this demo and<br />
your system setup carefully. The optimal parameter set varies from setup<br />
to setup.</p>
<h3 id="duplex-select-between-full-duplex-and-half-duplex-mode">‘duplex’ = Select between full-duplex and half-duplex mode:</h3>
<p>Depending on your sound hardware you’ll have to either leave ‘duplex’ at<br />
its default of zero (2 times half-duplex mode, aka simplex mode) or set<br />
it to 1 (full-duplex mode). On a given system, only one of these will work<br />
reliably (or at all): ASIO audio hardware – typically on MS-Windows –<br />
will usually need full-duplex mode and won’t work at all in simplex mode.<br />
On Macintosh OS/X it depends on the sound hardware. <a href="IntelMacs" class="uri">IntelMacs</a> are happy<br />
with half-duplex mode, some <a href="PowerMacs" class="uri">PowerMacs</a> may need full-duplex mode. However,<br />
except for ‘reqlatency’ == 0 minimal latency mode, simplex mode provides<br />
much higher accuracy and reliability on OS/X at least with the built-in<br />
soundchips on Intel based Macintosh computers. On Linux, performance<br />
varies depending on the card at use.</p>
<p>‘freq’ = Sampling frequency (Hz). Defaults to 48000 Hz as this rate is<br />
most commonly supported on most sound hardware. The maximum achievable<br />
value depends on your specific soundcard. IntelMac’s built in soundchips<br />
allow for a maximum of 96000 Hz, high-end soundcards may allow for 192000<br />
Hz under some circumstances. Increasing the frequency reduces minimum<br />
latency but increases system load and the probability of glitches.</p>
<p>‘minLatency’ is a tuning parameter for the driver and a hard-constraint<br />
on the mininum achievable latency for feedback. It is ignored on OS/X,<br />
but can be tused for tuning latency vs. reliability on Linux and on<br />
MS-Windows. High-end cards may allow for much lower than the default 10<br />
msecs, low-end cards may malfunction at lower settings. Non-ASIO<br />
soundcards on MS-Windows will likely fail already at much higher settings<br />
and be therefore completely unsuitabe for low latency feedback.</p>
<h3 id="specific-tips-for-different-setups">Specific tips for different setups:</h3>
<p>On OS/X with builtin soundchip on <a href="IntelMacs" class="uri">IntelMacs</a>, choose duplex = 0 for<br />
feedback with controlled low-latency, and a freq’ency of 96000 Hz. For<br />
lowest latency mode, you may try reqlatency = 0 and duplex = 1.</p>
<p>On MS-Windows you *must* use a soundcard with ASIO support for any<br />
reasonable results! Here you should always set duplex = 1 for full-duplex<br />
operation, anything else will fail. Use reqlatency = 0 for feedback with<br />
minimal latency, positive values for feedback with controlled latency.<br />
Play around with the ‘minLatency’ parameter, set it as low as possible -<br />
to the lowest value that doesn’t cause any error messages by our driver<br />
or audible artifacts like crackling noises or static. Try to set<br />
’freq’uency as high as possible. Check the manual of your soundcard for<br />
the highest value that can be used for capture + playback. E.g., the<br />
Soundblaster Audigy ZS 2 seems to be limited to max. 48000 Hz in this<br />
mode.</p>
<p>On Linux, no general statements can be made, only that some soundcards<br />
allow for extremely low latencies of &lt; 2 msecs if properly tuned. Search<br />
the Internet for tips.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDemos/DelayedSoundFeedbackDemo.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDemos/DelayedSoundFeedbackDemo.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDemos/DelayedSoundFeedbackDemo.m</code></p>
</div>
