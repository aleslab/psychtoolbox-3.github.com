<h2 id="psychtoolbox-psychglimageprocessing">[[Psychtoolbox]] › [[PsychGLImageProcessing]]</h2>
<p>[warpstruct, filterMode] = <a href="CreateDisplayWarp" class="uri">CreateDisplayWarp</a>(window, calibfilename [, showCalibOutput=0]);</p>
<p>Helper routine for Geometric display undistortion mapping, not to be<br />
called inside normal PTB scripts!</p>
<p>This function reads a display calibration file ‘calibfilename’ and builds<br />
a “geometric warp function” based on the calibration information in<br />
‘calibfilename’ for the onscreen window with handle ‘window’. It returns<br />
a struct ‘warpstruct’ that defines the created warp function. You could<br />
pass this ‘warpstruct’ as a parameter to the Psychtoolbox command…</p>
<p><a href="PsychImaging" class="uri">PsychImaging</a>(‘AddTask’, viewchannel, ‘GeometryCorrection’, warpstruct);</p>
<p>However, you normally do not call this routine directly from your script. Its<br />
called internally by the <a href="PsychImaging" class="uri">PsychImaging</a>() command…</p>
<p><a href="PsychImaging" class="uri">PsychImaging</a>(‘AddTask’, viewchannel, ‘GeometryCorrection’, calibfilename);</p>
<p>…in order to setup PTB’s imaging pipeline for realtime geometry<br />
correction, based on the calibration info in the file ‘calibfilename’.</p>
<p>Example: You created a calibration file ‘mycalib.mat’ to undistort the<br />
left view display of a stereo setup. Then you could apply this<br />
undistortion function via the following setup code:</p>
<p><a href="PsychImaging" class="uri">PsychImaging</a>(‘PrepareConfiguration’);<br />
<a href="PsychImaging" class="uri">PsychImaging</a>(‘AddTask’, ‘LeftView’, ‘GeometryCorrection’, ‘mycalib.mat’);<br />
window = <a href="PsychImaging" class="uri">PsychImaging</a>(‘OpenWindow’, screenid);</p>
<p>This would open an onscreen window just as window=<a href="Screen" class="uri">Screen</a>(‘OpenWindow’, screenid);<br />
would do. It would configure the window for automatic undistortion based<br />
on the data in ‘mycalib.mat’.</p>
<p>Psychtoolbox provides multiple different interactive setup routines that<br />
allow you to create a calibration file for your setup. Currently the<br />
following routines are provided:</p>
<p><a href="DisplayUndistortionBVL" class="uri">DisplayUndistortionBVL</a>.m – Undistortion based on 3rd order polynomial<br />
surface. This is the recommended calibration procedure for most cases -<br />
Proven in real-world use on many different display types.</p>
<p>When used with <a href="DisplayUndistortionBVL" class="uri">DisplayUndistortionBVL</a>, the <a href="GeometryCorrection" class="uri">GeometryCorrection</a> takes<br />
up to three optional parameters:</p>
<p><a href="PsychImaging" class="uri">PsychImaging</a>(‘AddTask’, ‘LeftView’, ‘GeometryCorrection’, ‘mycalib.mat’ [, debug=0][, xsampling=73][,ysampling=53][, replicate=[1,1]]);<br />
xsampling and ysampling specify the horizontal and vertical number of subdivisions<br />
for the warpmesh that is used for undistortion - higher numbers give more<br />
close approximations but increase drawing time. replicate is a vector which<br />
describes how often the mesh should be replicated into horizontal and vertical<br />
direction. Values other than the default [1,1] only make sense for special display<br />
devices like <a href="ProPixx" class="uri">ProPixx</a>.</p>
<p><a href="DisplayUndistortionBezier" class="uri">DisplayUndistortionBezier</a>.m – Undistortion based on a NURBS surface (Non<br />
uniform rational bezier spline surface). A simple procedure.</p>
<p><a href="DisplayUndistortionHalfCylinder" class="uri">DisplayUndistortionHalfCylinder</a>.m – Undistortion for projection of<br />
images to a half-cylindrical projection surface.</p>
<p><a href="DisplayUndistortionSphere" class="uri">DisplayUndistortionSphere</a>.m – Undistortion for projection of<br />
images to a spherical or half-spherical projection surface.</p>
<p><a href="DisplayUndistortionCSV" class="uri">DisplayUndistortionCSV</a>.m – Import undistortion information from<br />
a .csv file with a warp mesh description suitable for use with NVidia’s<br />
Warp API. This creates a compatible display warping to use of that <a href="NVidia" class="uri">NVidia</a><br />
technology.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychGLImageProcessing/CreateDisplayWarp.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychGLImageProcessing/CreateDisplayWarp.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychGLImageProcessing/CreateDisplayWarp.m</code></p>
</div>
