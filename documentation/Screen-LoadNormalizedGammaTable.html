<h1 id="screenloadnormalizedgammatable"><a href="Screen-LoadNormalizedGammaTable">Screen(‘LoadNormalizedGammaTable’)</a></h1>
<h2 id="psychtoolbox-screen.mexdll-subfunction">[[Psychtoolbox]] › [[Screen]].{mex*,dll} subfunction</h2>
<p>Load the gamma table of the specified screen or window<br />
‘windowPtrOrScreenNumber’.<br />
You need to pass the new hardware gamma table ‘table’ as a ‘nrows’ rows by 3<br />
columns matrix. Each row corresponds to a single color index value in the<br />
framebuffer and contains the Red- green- and blue values to use for output.<br />
Column 1 is the red value, column 2 is the green value and column 3 is the blue<br />
value. Values have to be in range between 0.0 (for dark pixel) and 1.0 (for<br />
maximum intensity). Example: table(127,1)=0.67 would mean that the red color<br />
value 127 should be displayed with 67% of the maximum red-gun intensity,<br />
table(32, 3)=0.11 means that blue color value 32 should be displayed with 11% of<br />
the maximum blue-gun intensity. The range of values 0-1 gets mapped to the<br />
hardware with the accuracy attainable by the hardwares DAC’s, typically between<br />
8 and 10 bits.<br />
The required number of rows ‘nrows’ is typically 256 for consumer graphics<br />
cards.<br />
If the ‘loadOnNextFlip’ flag is set to a value &lt; 2 for updating the graphics<br />
cards gamma table then the following limits apply: On MS-Windows, only gamma<br />
tables with 256 rows are accepted for the graphis card. On OS-X you can also<br />
pass 512, 1024, 2048, …, 65535 rows instead of 256 rows, although this only<br />
makes sense for few selected applications. On Linux/X11 with some pro-graphics<br />
cards, e.g., some <a href="NVidia" class="uri">NVidia</a> <a href="QuadroFX" class="uri">QuadroFX</a> cards, you can pass more than 256 rows,<br />
similar to OS/X.<br />
If you provide the index of an onscreen window as ‘ScreenNumber’ and you set the<br />
(optional) flag ‘loadOnNextFlip’ to 1, then update of the gamma table will not<br />
happen immediately, but only at execution of the <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’,<br />
windowPtrOrScreenNumber) command. This allows to synchronize change of both the<br />
visual stimulus and change of the gamma table with each other and to the<br />
vertical retrace. If the flag is set to its default value of zero then update of<br />
the gamma table will happen at the next vertical retrace (or immediately if the<br />
graphics driver doesn’t support sync to vertical retrace). A ‘loadOnNextFlip’<br />
flag of 2 will load the provided table not into the hardware tables of your<br />
graphics card, but into the hardware tables of special display devices, like<br />
e.g., the Bits++ box. It can also be used to load clut’s for color lookup table<br />
animation. Read the section about ‘EnableCLUTMapping’ in the ‘help PsychImaging’<br />
for info on how to enable and use color lookup table animation.<br />
On <a href="MacOS" class="uri">MacOS</a>-X, the optional ‘physicalDisplay’ flag can be set to 1, zero is the<br />
default. In this case, the ‘windowPtrOrScreenNumber’ argument (which then must<br />
be a real screen number, not a window index) selects among physically present<br />
display devices, instead of logical devices. This is important if you want to<br />
assign different gamma-tables to multiple displays in a ‘clone’ or ‘mirror mode’<br />
configuration, as there is only one logical display, but multiple physical<br />
displays, mirroring each other. Please note that screen numbering is different<br />
for physical vs. logical displays. For a list of physical display indices, call<br />
<a href="Screen" class="uri">Screen</a>(‘Screens’, 1);<br />
On GNU/Linux X11, the optional ‘physicalDisplay’ parameter selects the video<br />
output to which the gamma table should be applied in multi-display mode. On<br />
Linux/X11 a screen can output to multiple video displays, therefore this<br />
parameter allows to setup individual gamma tables for each display. The default<br />
setting is -1, which means to apply the (same) gamma table to all outputs of the<br />
given screen.<br />
The optional ‘ignoreErrors’ parameter, if set to 1, will ask the function to<br />
continue in the case that the operating system rejected a gamma table update,<br />
instead of aborting your script, if you requested an immediate update via<br />
‘loadOnNextFlip’ == 0. The optional 2nd return argument ‘success’ will be 1 on<br />
success, 0 on a rejected immediate update. ‘ignoreErrors’ will be ignored in<br />
case of deferred updates via ‘loadOnNextFlip’ &gt; 0.<br />
On OSX and Linux/X11, this function takes arbitrary gamma-tables which makes it<br />
suitable for CLUT animation, although you should rather avoid CLUT animation, or<br />
use the <a href="PsychImaging" class="uri">PsychImaging</a>(…‘EnableCLUTMapping’…) method instead. CLUT animation<br />
nowadays is almost always the wrong approach. If you really need it, the<br />
<a href="PsychImaging" class="uri">PsychImaging</a>() based method provides cross-platform compatibility and reliable<br />
timing for CLUT animation.<br />
On Microsoft Windows, only tables with monotonically increasing values are<br />
considered valid. Other tables get rejected by the operating system, so this is<br />
not suitable for CLUT animation, but only for linearizing or calibrating display<br />
devices. Microsoft Windows does impose additional unknown constraints beyond<br />
monotonicity, so generally anything not resembling a regular gamma calibration<br />
table may prove troublesome. Similar limitations currently apply to Linux when<br />
used with the Wayland display server.<br />
The function returns the old gamma table as optional 1st return argument and a<br />
success status code of 1 on success, 0 on failure as 2nd optional return<br />
argument in case of an immediate update (ie ‘loadOnNextFlip’ == 0).</p>
<p>&lt;&lt;=====See also:===== ReadNormalizedGammaTable &lt;&lt;</p>
