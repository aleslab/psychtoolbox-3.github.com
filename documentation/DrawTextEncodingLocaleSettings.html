<h2 id="psychtoolbox-psychdocumentation">[[Psychtoolbox]] › [[PsychDocumentation]]</h2>
<p><a href="DrawTextEncodingLocaleSettings" class="uri">DrawTextEncodingLocaleSettings</a></p>
<p>If you are just concerned with drawing “standard” ASCII text with the<br />
<a href="Screen" class="uri">Screen</a>(‘DrawText’, window, text); command, i.e. text that only contains<br />
“standard” latin characters, e.g., abcdef….ABCDEF…. and numbers<br />
01234567890 and a few punctuation marks and symbols like .,!?#@$%&amp; etc.<br />
then there’s nothing you’d need to do. <a href="Screen" class="uri">Screen</a>(‘DrawText’) and<br />
<a href="DrawFormattedText" class="uri">DrawFormattedText</a>() will process these just fine.</p>
<p>If you want to draw “native” unicode text strings conforming to UTF-16<br />
encoding with characters or code points in the BMP (Basic multilingual<br />
plane), you can simply convert your string of unicode code points into a<br />
vector of doubles, ie., pass it as a vector of numbers of class double(),<br />
e.g., text = [1424, 1425, 1426] for the first three characters of the<br />
hebrew alphabet.</p>
<p>Direct drawing of unicode text characters outside the BMP is possible in<br />
the same way the default textrenderer if you’ve installed the neccessary<br />
software as described in “help <a href="DrawTextPlugin" class="uri">DrawTextPlugin</a>”. In that case, the unicode<br />
code points may have values greater than 65535, ie., they are processed<br />
internally as UTF-32 / UCS-4 characters - Each single number represents<br />
exactly one character and the numbers can be codepoints from any Unicode<br />
plane.</p>
<p>The legacy OS/X text renderer and MS-Windows text renderer, which are<br />
used if you select <a href="Screen" class="uri">Screen</a>(‘<a href="Preference" class="uri">Preference</a>’, ‘TextRenderer’, 0) or if the<br />
standard renderer does not work, only support UTF-16 / UCS-2 encoding.<br />
Therefore, characters outside of the BMP must be represented by pairs of<br />
codepoints, each with a value between 0 and 65535 - Two consecutive<br />
values in your double vector will represent one character from outside<br />
the BMP.</p>
<p>You can also draw non-ASCII character strings encoded into some<br />
single-byte encoding scheme, multibyte encoding scheme or unicode<br />
characters that are not encoded as doubles but as a sequence of UTF-8<br />
encoded bytes. To do so, first you have to tell <a href="Screen" class="uri">Screen</a>() the encoding<br />
scheme of the character string by a call to<br />
<a href="Screen" class="uri">Screen</a>(‘<a href="Preference" class="uri">Preference</a>’,‘TextEncodingLoale’, newloc); newloc is the name of<br />
the text encoding scheme to use. Example names for valid locales could be<br />
‘en_US.ISO8859-1’ for single-byte ISO8859-1 “Latin-1” encoding, or<br />
‘UTF-8’ for UTF-8 encoded unicode text, or ‘C’ for default C language<br />
character encoding. Passing an empty string ’’ will reset the setting to<br />
the system default of your operating system. The function returns the<br />
previous setting. On OS/X and Linux you can type “locale -a” in a<br />
terminal window to list all supported settings. For MS-Windows you can<br />
find supported codepages under this URL:<br />
http://msdn.microsoft.com/en-us/library/dd317756%28VS.85%29.aspx e.g.,<br />
setting a locale of ‘.1252’ would select MS-Windows codepage 1252, aka<br />
‘windows-1252’. A setting of ‘UTF-8’ for UTF-8 encoded unicode should<br />
always work. The set of other supported encodings is highly operating<br />
system dependent.</p>
<p>After you’ve told <a href="Screen" class="uri">Screen</a> the encoding to use, you can pass strings to<br />
<a href="Screen" class="uri">Screen</a>(‘DrawText’). If you want to make sure that Matlab or Octave don’t<br />
tamper in unexpected or uncontrollable ways with your string, you can<br />
pass the string as a uint8 vector. Passing the string as uint8 vector is<br />
recommended in most cases. Different versions of Matlab and Octave store<br />
and process regular char() character strings in different ways on<br />
different operating systems which can often lead to unexpected results.<br />
On some setups you will be able to directly pass regular text strings,<br />
but this is not guaranteed to be portable across different computer<br />
systems, Matlab or Octave versions.</p>
<p>If you get unexpected results for given text strings you can call<br />
<a href="Screen" class="uri">Screen</a>(‘<a href="Preference" class="uri">Preference</a>’,‘Verbosity’, 10); before a drawtext operation. The<br />
function will then print the passed string as a sequence of numbers after<br />
conversion into unicode format. This allows to check what kind of unicode<br />
characters were generated.</p>
<p>Assuming <a href="Screen" class="uri">Screen</a>(‘DrawText’) managed to receive your final (unicode) text<br />
string correctly, you’ll also have to make sure that a font is selected<br />
that supports the characters in your string. E.g., not all fonts support<br />
hebrew characters. Use <a href="Screen" class="uri">Screen</a>(‘TextFont’, window, fontName); to select a<br />
proper font fontName. How to find such a font is operating system<br />
specific. The default text renderer allows to select fonts by properties<br />
instead of names as well, e.g., it allows to select a font that supports<br />
a requested language: <a href="Screen" class="uri">Screen</a>(‘Textfont’, window, ‘-:lang=he’); would<br />
select a font that supports hebrew. <a href="Screen" class="uri">Screen</a>(‘Textfont’, window,<br />
‘-:lang=ja’); would select a font that supports japanese script. See<br />
some more examples in the code of <a href="DrawHighQualityUnicodeTextDemo" class="uri">DrawHighQualityUnicodeTextDemo</a>.m.</p>
<p>If you type <a href="DrawTextEncodingLocaleSettings" class="uri">DrawTextEncodingLocaleSettings</a> to run this script, you may<br />
see some hebrew characters rendered if your systems fonts and text<br />
renderers do support this. This code also acts as a sample on how to pass<br />
UTF-8 unicode strings to ‘DrawText’.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDocumentation/DrawTextEncodingLocaleSettings.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDocumentation/DrawTextEncodingLocaleSettings.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDocumentation/DrawTextEncodingLocaleSettings.m</code></p>
</div>
