<h2 id="psychtoolbox-psychdemos">[[Psychtoolbox]] › [[PsychDemos]]</h2>
<p><a href="ProceduralGarboriumDemo" class="uri">ProceduralGarboriumDemo</a>([ngabors=200]) – An aquarium full of cute little procedural gabors!</p>
<p>This demo shows how to use the <a href="Screen" class="uri">Screen</a>(‘DrawTextures’) command to draw a<br />
large number of similar images quickly - in this case, Gabor patches of<br />
different position, size and orientation. It also shows how to achieve<br />
fast, mathematically correct, linear superposition of image patches by<br />
use of alpha blending and the Psychtoolbox imaging pipeline. While you<br />
could always achieve proper superposition by precomputing large images in<br />
Matlab, then drawing them as textures, the use of alpha blending allows<br />
to offload the computations to your graphics hardware - this allows<br />
speedups by factors of more than 100x in some cases!</p>
<p>Furthermore the demo demonstrates how to use procedural shading to<br />
compute gabor patches on-the-fly instead of precomputing a prototypical<br />
gabor patch image within Matlab. The command <a href="CreateProceduralGabor" class="uri">CreateProceduralGabor</a>()<br />
allows to generate such a procedural gabor and then draw it with the<br />
normal ‘DrawTexture’ or ‘DrawTextures’ texture drawing commands. However,<br />
this gabor patch is not a image like a normal texture. Instead it is<br />
computed during each draw operation by a so called GLSL shader program –<br />
the gabor formula is evaluated on the fly inside your fast graphics card.</p>
<p>This method has a few advantages over the standard texture based method<br />
(as demonstrated in <a href="GarboriumDemo">GarboriumDemo)</a>):</p>
<ul>
<li><p>GPU’s are extremely fast at this kind of jobs, so the method is<br />
significantly faster on modern GPU’s, especially for large patches,<br />
allowing for even higher redraw rates.</p></li>
<li><p>As the formula is evaluated on the fly for each output pixel, there are<br />
no resampling artifacts, regardless of size of your gabor.</p></li>
<li><p>You can change all interesting stimulus parameters on the fly – change<br />
contrast, aspect ratio, spatial constant, frequency, phase, orientation<br />
etc. for each patch during each redraw cycle without the need to<br />
recompute any matrices and without any speed penalty.</p></li>
</ul>
<p>The downsides of this method are the need for recent graphics hardware<br />
(GPU’s) and the fact that the stimulus definition formula needs to be<br />
implemented as a shader program in the GLSL language, which is less easy<br />
to use - and less forgiving of programming errors - than the simple and<br />
easy Matlab language. This means that you’re either restricted to our<br />
predifined set of primitives, or you’ll have some steep learning curve.<br />
Currently PTB provides gabors and (via <a href="CreateProceduralSineGrating" class="uri">CreateProceduralSineGrating</a>())<br />
sine gratings.</p>
<p>The demo shows “an aquarium” of many cute little gabor patches, each moving<br />
into a random direction. Sometimes the gabors intersect, in that case<br />
you’ll see a linear superposition of them. The gabors also shift phase<br />
and pulse (aspect ratio modulation) to make them more life-like – and to<br />
demonstrate runtime change of interesting stimulus parameters, of course.</p>
<p>Each frame of the animation contains ‘ngabors’ patches, ngabors defaults<br />
to 200. Change the number as first optional parameter ‘ngabors’ if you want<br />
to exercise your graphics hardware and cpu.</p>
<p>You can exit the demo by pressing any key on the keyboard.</p>
<p>This demo needs recent graphics hardware with floating point framebuffer<br />
support: ATI Radeon X1000 and later, <a href="NVidia" class="uri">NVidia</a> <a href="GeForce" class="uri">GeForce</a> 6000 and later.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDemos/ProceduralGarboriumDemo.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDemos/ProceduralGarboriumDemo.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDemos/ProceduralGarboriumDemo.m</code></p>
</div>
