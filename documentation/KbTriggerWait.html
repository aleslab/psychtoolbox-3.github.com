<h2 id="psychtoolbox-psychbasic">[[Psychtoolbox]] › [[PsychBasic]]</h2>
<p>secs = <a href="KbTriggerWait" class="uri">KbTriggerWait</a>(keyCode, [deviceNumber])</p>
<p>Waits until one or more trigger keys have been pressed and returns the<br />
time of the first key press in seconds. The keyCode argument can be a<br />
vector of key indices. For example, to check for the ‘t’ key as the<br />
trigger use <a href="KbTriggerWait" class="uri">KbTriggerWait</a><a href="(KbName)(&#39;t&#39;)">(KbName</a>, to check for ‘t’ and the escape<br />
key, use <a href="KbTriggerWait" class="uri">KbTriggerWait</a>([<a href="KbName" class="uri">KbName</a>(‘t’), <a href="KbName" class="uri">KbName</a>(‘ESCAPE’)]).</p>
<p>You cannot use <a href="KbTriggerWait" class="uri">KbTriggerWait</a> while a queue created by <a href="KbQueueCreate" class="uri">KbQueueCreate</a><br />
exists. To shut down such a queue, use <a href="KbQueueRelease" class="uri">KbQueueRelease</a>.</p>
<p>On Matlab versions older than R2007a on MS-Windows, this function simply<br />
serves as a convenient substitute for using <a href="KbCheck" class="uri">KbCheck</a> to detect the<br />
trigger of interest.</p>
<p>This function should allow triggers to be reliably detected from devices<br />
that only briefly report that the key is down. <a href="KbCheck" class="uri">KbCheck</a> is not reliable<br />
with such devices because it may not poll often enough to detect the<br />
key down state.</p>
<p><a href="KbTriggerWait" class="uri">KbTriggerWait</a> uses the <a href="PsychHID" class="uri">PsychHID</a> function, a general purpose function for<br />
reading from the Human Interface Device (HID) class of USB devices.<br />
Unlike <a href="KbCheck" class="uri">KbCheck</a>, it starts a queue that receives keyboard events<br />
regarding the trigger key (and no other keys) and then polls this queue<br />
(rather than the current key status) periodically. In theory, this<br />
should also provide more accurate reporting of the time of the<br />
triggering keypress. However, if multiple trigger events have occurred<br />
since last polled, it is possible that the timestamp of the earliest<br />
of these will have already rotated out of the limited capacity (eight<br />
events) queue. In this case, the time of the earliest event remaining<br />
in the queue is reported. Since the polling frequency is the same as<br />
<a href="KbCheck" class="uri">KbCheck</a>, it should be more accurate on average with regard to timing,<br />
even when the timestamps of the earliest events have been lost due to<br />
queue overflow.</p>
<p><a href="KbTriggerWait" class="uri">KbTriggerWait</a> tests the first USB-HID keyboard device by default.<br />
Optionally, you can pass in a ‘deviceNumber’ to test a different keyboard<br />
if multiple keyboards are connected to your machine. The function also<br />
allows to wait for button presses on keypads, mice or other HID devices<br />
with buttons or keys.</p>
<p>Passing a deviceNumber of -1 will NOT cause all keyboards to be detected</p>
<p>One disadvantage of this function is that it renders Matlab relatively<br />
unresponsive to Ctrl-C interrupts. <a href="KbQueueWait" class="uri">KbQueueWait</a> is a better option in<br />
this regard, but more complicated to use.<br />
_________________________________________________________________________</p>
<p>See also: <a href="KbQueueWait" class="uri">KbQueueWait</a> <a href="KbCheck" class="uri">KbCheck</a>, <a href="KbWait" class="uri">KbWait</a>, <a href="GetChar" class="uri">GetChar</a>, <a href="CharAvail" class="uri">CharAvail</a>, <a href="KbDemo" class="uri">KbDemo</a>.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychBasic/KbTriggerWait.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychBasic/KbTriggerWait.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychBasic/KbTriggerWait.m</code></p>
</div>
