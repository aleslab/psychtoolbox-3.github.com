<h2 id="psychtoolbox-psychgpgpu">[[Psychtoolbox]] › [[PsychGPGPU]]</h2>
<p>outObj = <a href="GPUTypeFromToGL" class="uri">GPUTypeFromToGL</a>(cmd, inObj [, glObjType][, outObj][, keepmapped][, mapflags])</p>
<p>Note: Calling this command requires calling the following command first<br />
to initialize Psychtoolbox GPU computing support:</p>
<p><a href="PsychImaging" class="uri">PsychImaging</a>(‘AddTask’, ‘General’, ‘UseGPGPUCompute’, ‘GPUmat’);</p>
<h1 id="supported-cmd-commands">Supported ‘cmd’ commands</h1>
<p>if cmd is zero, then convert an <a href="OpenGL" class="uri">OpenGL</a> object of type glObjType,<br />
referenced by handle inObj into a GPU object and return it in outObj. If<br />
the optional outObj is provided as input argument, try to recycle it –<br />
just fill its content with <a href="OpenGL" class="uri">OpenGL</a> object’s content. Otherwise, create an<br />
outObj of matching format for content. If ‘keepmapped’ is set to 1, the <a href="OpenGL" class="uri">OpenGL</a><br />
object will stay mapped for the GPU compute api, otherwise it gets immediately<br />
unmapped after the conversion. Keeping the object mapped is more efficient, but<br />
requires more careful management of objects to prevent malfunctions.</p>
<p>If cmd is == 1, then convert GPU object inObj to <a href="OpenGL" class="uri">OpenGL</a> object of type<br />
glObjType and return it in outObj. Try to recycle a passed in outObj, if<br />
possible, otherwise create a new one. ‘keepmapped’ - see explanation for cmd zero.</p>
<p>If cmd is == 2, then unmap the <a href="OpenGL" class="uri">OpenGL</a> object. You must do this if you previously<br />
set the optional ‘keepmapped’ flag to 1 during a copy operation and now want to<br />
use the object which was the source or the target of that copy again with <a href="OpenGL" class="uri">OpenGL</a><br />
or <a href="Screen" class="uri">Screen</a>(), ie., with a Psychtoolbox drawing or image processing function.<br />
Unmapping is neccessary for proper <a href="OpenGL" class="uri">OpenGL</a> operation, but costs a fraction of a<br />
millisecond of overhead on well working operating systems like Linux. Clever use<br />
of the ‘keepmapped’ flag and this manual unmapping method sometimes allows to<br />
save some redundant unmap calls.</p>
<p>If cmd is == 3, then remove the <a href="OpenGL" class="uri">OpenGL</a> object from use by the GPU compute toolkit.<br />
This must be done before destroying/deleting the <a href="OpenGL" class="uri">OpenGL</a> object, e.g., before<br />
a call to <a href="Screen" class="uri">Screen</a>(‘<a href="Close" class="uri">Close</a>’, x); for a window or texture handle x. This operation<br />
can be very expensive – on the order of multiple milliseconds, so use sparingly.</p>
<p>If cmd is == 4, all <a href="OpenGL" class="uri">OpenGL</a> objects are removed. Usually used before closing (all)<br />
onscreen windows, e.g., via <a href="Screen" class="uri">Screen</a>(‘CloseAll’) or <a href="sca" class="uri">sca</a>. This cache flush is very<br />
expensive!</p>
<p>If cmd is == 5, then the given <a href="OpenGL" class="uri">OpenGL</a> object ‘inObj’ of type glObjType is mapped<br />
and a CUDA memory pointer is returned, for use with external mex files, so these<br />
can directly access the mapped resource. The object is mapped read-only.</p>
<p>If cmd is == 6, the same operation as cmd == 5 happens, but the object is mapped<br />
write-only.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychGPGPU/GPUTypeFromToGL.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychGPGPU/GPUTypeFromToGL.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychGPGPU/GPUTypeFromToGL.m</code></p>
</div>
