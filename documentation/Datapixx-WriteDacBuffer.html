<h1 id="datapixxwritedacbuffer"><a href="Datapixx-WriteDacBuffer">Datapixx(‘WriteDacBuffer’)</a></h1>
<h2 id="psychtoolbox-datapixx.mexdll-subfunction">[[Psychtoolbox]] › [[Datapixx]].{mex*,dll} subfunction</h2>
<p>Download DAC data from local host to a Datapixx internal waveform buffer.<br />
-“bufferData” is a 2D matrix of DAC waveform voltages. Each row of the matrix<br />
contains the sample data for one DAC channel. Each column of the matrix contains<br />
one sample for each DAC channel.<br />
-“bufferAddress” is the byte address in Datapixx RAM where the buffer should<br />
start. Specifying a bufferAddress of -1 will cause bufferData to be streamed to<br />
the end of the buffer which was last defined in <a href="SetDacSchedule" class="uri">SetDacSchedule</a>, and initialized<br />
by a call to <a href="WriteDacBuffer" class="uri">WriteDacBuffer</a> with bufferAddress not set to -1.<br />
-“nextBufferAddress” is the next Datapixx address after bufferData has been<br />
downloaded. Multiple contiguous waveforms can be downloaded by passing the<br />
returned nextBufferAddress of one waveform as the bufferAddress of the next<br />
waveform. The Datapixx typically has 128 MB of internal RAM which is shared<br />
between all I/O subsystems (DAC/ADC/AUDIO, etc). Datapixx(‘GetRamSize’) can be<br />
used to query the quantity of RAM in your system.<br />
-“channelList” is an optional list of the DAC channels which will be targeted by<br />
the waveform buffer. channelList is only used for looking up the DAC voltage<br />
ranges in order to convert double precision bufferData into binary DAC data.<br />
channelList defaults to [0:numChannels-1], where numChannels is the number of<br />
rows in bufferData.<br />
-“underflow” or “overflow” are set to 1 if streaming calls to <a href="WriteDacBuffer" class="uri">WriteDacBuffer</a><br />
supply insufficient, or too much, data. If bufferAddress is passed a value of<br />
-1, then <a href="WriteDacBuffer" class="uri">WriteDacBuffer</a> is streaming continuous waveform data into a circular<br />
buffer. Streaming playback must ensure that the provided data always remains<br />
ahead of the playback position, without providing more data than can fit in the<br />
playback buffer. The freeBufferFrames field returned by <a href="GetDacStatus" class="uri">GetDacStatus</a> indicates<br />
the maximum number of frames which can be written by <a href="WriteDacBuffer" class="uri">WriteDacBuffer</a>. If more<br />
than this number of frames is written, an overflow occurs and there will be a<br />
glitch in the generated waveform. If the streaming data is not supplied quickly<br />
enough, then old data will be played, also causing a glitch. In addition to<br />
returning underflow/overflow flags, these errors will increment the<br />
numStreamUnderflows/numStreamOverflows fields returned by <a href="GetDacStatus" class="uri">GetDacStatus</a>.<br />
See <a href="DatapixxDac" class="uri">DatapixxDac</a>*Demo files for examples.</p>
<p>&lt;&lt;=====See also:===== SetDacSchedule &lt;&lt;</p>
