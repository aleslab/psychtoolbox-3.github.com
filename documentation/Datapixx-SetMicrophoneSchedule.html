<h1 id="datapixxsetmicrophoneschedule"><a href="Datapixx-SetMicrophoneSchedule">Datapixx(‘SetMicrophoneSchedule’)</a></h1>
<h2 id="psychtoolbox-datapixx.mexdll-subfunction">[[Psychtoolbox]] › [[Datapixx]].{mex*,dll} subfunction</h2>
<p>Configure a schedule for audio input acquisition.<br />
-“scheduleOnset” is the desired delay (in double precision seconds) between<br />
schedule initiation, and the first audio sample acquisition.<br />
-“scheduleRate” is the rate at which successive audio samples are acquired. The<br />
value is given in samples/second, and must be in the range 8000-96000.<br />
Note that the audio input and audio output systems share timing resources, and<br />
must be configured to the same rate if running simultaneously. Specifically,<br />
<a href="SetMicrophoneSchedule" class="uri">SetMicrophoneSchedule</a> has a side effect of overwriting the audio output rate, to<br />
have the same value as that which is passed here.<br />
-“maxScheduleFrames” has two modes, depending on whether the acquisition dataset<br />
has a fixed known length. If the dataset length is known (eg: 100000 samples),<br />
then just pass 100000 to maxScheduleFrames. In this mode, once the audio<br />
acquisition schedule is started with <a href="StartMicrophoneSchedule" class="uri">StartMicrophoneSchedule</a>, the schedule will<br />
terminate automatically when maxScheduleFrames has been acquired. If the dataset<br />
length is not known in advance, then pass 0 to maxScheduleFrames. In this mode,<br />
the acquisition will continue until the schedule is manually stopped using<br />
<a href="StopMicrophoneSchedule" class="uri">StopMicrophoneSchedule</a>.<br />
-“lrMode” specifies how microphone Left/Right channels are stored to the<br />
acquisition schedule buffer. The following values are used:<br />
0: MONO, Average of Left/Right data is written to buffer<br />
1: LEFT, Only left data is written to buffer<br />
2: RIGHT, Only right data is written to buffer<br />
3: STEREO, Left and Right data are both written to buffer<br />
If STEREO is selected, then 2 rows of data will be returned in<br />
<a href="ReadMicrophoneBuffer" class="uri">ReadMicrophoneBuffer</a>.<br />
-“bufferBaseAddress” specifies the start of the RAM buffer which should hold the<br />
acquired data inside the Datapixx. Use <a href="ReadMicrophoneBuffer" class="uri">ReadMicrophoneBuffer</a> to upload the<br />
acquired data from this address after calling <a href="StartMicrophoneSchedule" class="uri">StartMicrophoneSchedule</a>.<br />
-“numBufferFrames” specifies the desired size of the acquisition buffer in the<br />
Datapixx RAM. For many applications, the Datapixx has enough RAM to acquire a<br />
complete dataset without streaming. In these cases, numBufferFrames could be<br />
left at its default value of maxScheduleFrames. The Datapixx typically has 128<br />
MB of internal RAM which is shared between all I/O subsystems (DAC/ADC/AUDIO,<br />
etc). Datapixx(‘GetRamSize’) can be used to query the quantity of RAM in your<br />
system. If maxScheduleFrames is larger than numBufferFrames (or 0), then each<br />
time the acquisition frame counter reaches a multiple of numBufferFrames, the<br />
acquisition buffer address automatically wraps back to bufferBaseAddress. This<br />
circular buffer effect can be used for acquiring arbitrarily long audio<br />
datasets. Simply monitor newBufferFrames returned by <a href="GetMicrophoneStatus" class="uri">GetMicrophoneStatus</a>, and<br />
use <a href="ReadMicrophoneBuffer" class="uri">ReadMicrophoneBuffer</a> in streaming mode to upload newly acquired data from<br />
the Datapixx RAM to the host.<br />
Note that every call to <a href="StartMicrophoneSchedule" class="uri">StartMicrophoneSchedule</a> must be preceeded by a call to<br />
<a href="SetMicrophoneSchedule" class="uri">SetMicrophoneSchedule</a> (ie: multiple calls to <a href="StartMicrophoneSchedule" class="uri">StartMicrophoneSchedule</a> each<br />
require their own call to <a href="SetMicrophoneSchedule">SetMicrophoneSchedule)</a>).<br />
See <a href="DatapixxMicrophone" class="uri">DatapixxMicrophone</a>*Demo and <a href="DatapixxAudioFeedbackDemo" class="uri">DatapixxAudioFeedbackDemo</a> files for examples.</p>
<p>&lt;&lt;=====See also:===== InitAudio, SetMicrophoneSource, GetMicrophoneGroupDelay, StartMicrophoneSchedule, StopMicrophoneSchedule, GetMicrophoneStatus, ReadMicrophoneBuffer &lt;&lt;</p>
