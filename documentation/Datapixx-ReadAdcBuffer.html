<h1 id="datapixxreadadcbuffer"><a href="Datapixx-ReadAdcBuffer">Datapixx(‘ReadAdcBuffer’)</a></h1>
<h2 id="psychtoolbox-datapixx.mexdll-subfunction">[[Psychtoolbox]] › [[Datapixx]].{mex*,dll} subfunction</h2>
<p>Upload ADC data from a Datapixx internal acquisition buffer to the local host.<br />
-“numFrames” is the number of acquired frames to upload. In a streaming<br />
application, numFrames should not exceed newBufferFrames returned by<br />
<a href="GetAdcStatus" class="uri">GetAdcStatus</a>. It may be possible to reduce dynamic memory allocation overhead by<br />
matching numFrames to the size of an existing bufferData output argument.<br />
-“bufferAddress” is the byte address in Datapixx RAM where the buffered data can<br />
be found. If this argument is not provided, it will take on the value of<br />
bufferBaseAddress passed to the last call to <a href="SetAdcSchedule" class="uri">SetAdcSchedule</a>. Specifying a<br />
bufferAddress of -1 will cause data to be streamed from the buffer which was<br />
defined in the last call to <a href="SetAdcSchedule" class="uri">SetAdcSchedule</a>.<br />
-“bufferData” is a 2D matrix of acquired ADC voltages. Each row of the matrix<br />
contains the acquired data for one ADC channel. Each column of the matrix<br />
contains one acquired datum for each ADC channel. <a href="ReadAdcBuffer" class="uri">ReadAdcBuffer</a> assumes that the<br />
number of channels to return equals the number of channels passed in the last<br />
call to <a href="SetAdcSchedule" class="uri">SetAdcSchedule</a>.<br />
-“bufferTimetags” is a row vector of acquisition timetags. There is one timetag<br />
for each acquisition frame in bufferData. The timetags are in double precision<br />
seconds since Datapixx powerup.<br />
-“underflow” or “overflow” are set to 1 if streaming calls to <a href="ReadAdcBuffer" class="uri">ReadAdcBuffer</a> read<br />
data too quickly or too slowly. If bufferAddress is passed a value of -1, then<br />
<a href="ReadAdcBuffer" class="uri">ReadAdcBuffer</a> is streaming continuous acquisition data from a circular buffer.<br />
Streaming acquisition must ensure that the uploaded data frame always remains<br />
behind the acquisition frame, without allowing acquired data to overflow the<br />
acquisition buffer. The newBufferFrames field returned by <a href="GetAdcStatus" class="uri">GetAdcStatus</a> indicates<br />
the maximum number of frames which can be read by <a href="ReadAdcBuffer" class="uri">ReadAdcBuffer</a>. If more than<br />
this number of frames is read, an underflow occurs and there will be errors in<br />
the acquired data. If the streaming data is not read quickly enough, and<br />
newBufferFrames exceeds the buffer size (numBufferFrames passed to<br />
<a href="SetAdcSchedule">SetAdcSchedule)</a>) then an overflow has occurred, causing data to be lost. In<br />
addition to returning underflow/overflow flags, the<br />
numStreamUnderflows/numStreamOverflows fields returned by <a href="GetAdcStatus" class="uri">GetAdcStatus</a> will be<br />
incremented.<br />
See <a href="DatapixxAdc" class="uri">DatapixxAdc</a>*Demo files for examples.</p>
<p>&lt;&lt;=====See also:===== SetAdcSchedule, StartAdcSchedule, StopAdcSchedule, GetAdcStatus &lt;&lt;</p>
