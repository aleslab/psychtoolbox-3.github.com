<h2 id="psychtoolbox-psychdemos">[[Psychtoolbox]] › [[PsychDemos]]</h2>
<p>Template for asynchronous trigger collection and timestamping from serial port.</p>
<p><a href="ReceivingTriggerFromSerialPortDemo" class="uri">ReceivingTriggerFromSerialPortDemo</a>([sampleFreq=120][, baudRate=115200][, portSpec=auto-detect][, specialSettings=None])</p>
<p>This demo shows how to perform efficient trigger recording from an<br />
external trigger device which is connected to the serial port or a USB-Serial<br />
converter. The device is assumed to send trigger bytes at a rate of at most<br />
‘sampleFreq’ Hz. Typical devices would be fMRI / TMS / MEG / EEG systems<br />
or other research equipment.</p>
<p>The demo connects to the first found serial port, or optionally the port<br />
given by the ‘portSpec’ parameter, e.g., ‘COM5’. It connects at a<br />
baudrate of ‘baudRate’ Baud, by default without flow-control, with 8<br />
databits, 1 stopbit and no parity, but you can set arbitrary settings via<br />
the optional ‘specialSettings’ string (see <a href="IOPort" class="uri">IOPort</a> <a href="OpenSerialPort" class="uri">OpenSerialPort</a>?<br />
online-help for possible parameters).</p>
<p>Then it allocates receivebufferspace for up to 1 hour of uninterrupted<br />
recording, then starts background recording of data.</p>
<p>Triggers can be read out in realtime, as demonstrated in the main<br />
while loop here, or offline at end of a session.<br />
Each trigger gets a <a href="GetSecs" class="uri">GetSecs</a>() timestamp of when it was received.</p>
<p>Of course you’ll need to understand the code of this demo and then<br />
customize it for your needs.</p>
<p>For accurate timestamping and data reception with low latency, make sure<br />
that you’ve configured your serial ports properly. Search the<br />
Psychtoolbox forum for posts on that topic, e.g., message 9873.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDemos/ReceivingTriggerFromSerialPortDemo.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDemos/ReceivingTriggerFromSerialPortDemo.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDemos/ReceivingTriggerFromSerialPortDemo.m</code></p>
</div>
