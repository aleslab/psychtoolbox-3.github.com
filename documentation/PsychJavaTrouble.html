<h2 id="psychtoolbox-psychjava">[[Psychtoolbox]] › [[PsychJava]]</h2>
<p><a href="PsychJavaTrouble" class="uri">PsychJavaTrouble</a> – What to do if Java-based Psychtoolbox functions fail?</p>
<p>You probably arrived at this help text because of an error in execution<br />
of one of the Psychtoolbox Java based functions, e.g., <a href="ListenChar" class="uri">ListenChar</a>,<br />
<a href="CharAvail" class="uri">CharAvail</a>, <a href="GetChar" class="uri">GetChar</a> or <a href="FlushEvents" class="uri">FlushEvents</a>.</p>
<p>These are common reasons for failure of Java based Psychtoolbox<br />
functions:</p>
<ol type="1">
<li><p>You run Matlab in nojvm mode, i.e., you started Matlab via ‘matlab<br />
-nojvm’. In that case, Matlabs Java virtual machine is disabled and so<br />
are all Java based Psychtoolbox functions. In that case you need to<br />
restart Matlab with its Java VM enabled.</p></li>
<li><p>You run GNU/Octave, which doesn’t support our Java based keyboard<br />
functions. However, then you should not ever end here, as we use an<br />
alternate implementation on Octave.</p></li>
<li><p>The Psychtoolbox/<a href="PsychJava" class="uri">PsychJava</a>/ subfolder of your working copy of<br />
Psychtoolbox isn’t included in Matlabs static Java classpath. The<br />
Psychtoolbox installer/upgrader <a href="(DownloadPsychtoolbox),%20%5BSetupPsychtoolbox%5D(SetupPsychtoolbox)%20or%20%5BUpdatePsychtoolbox%5D(UpdatePsychtoolbox),%20as%20well%20as%20%5BDownloadAdditionsForLinux">(DownloadPsychtoolbox</a>](DownloadAdditionsForLinux)) usually<br />
tries to edit the ‘classpath.txt’ file, or since Matlab 8.1,<br />
‘javaclasspath.txt’, of your Matlab installation in order to add the<br />
Psychtoolbox/<a href="PsychJava" class="uri">PsychJava</a> subfolder to Matlabs classpath. This procedure may<br />
fail due to insufficient access permissions on your system. You can<br />
verify this by entering ‘type classpath.txt’ at the Matlab prompt. The<br />
printed file should contain the path to the <a href="PsychJava" class="uri">PsychJava</a> folder. If it<br />
doesn’t, you may want to edit the file yourself (‘which classpath.txt’<br />
tells you the location of the file) or ask a system administrator to do<br />
it for you. After editing the file you need to restart Matlab. Instead of<br />
manual editing you can also call this function as <a href="PsychJavaTrouble" class="uri">PsychJavaTrouble</a>(1); -<br />
This will try to automatically modify the classpath.txt or<br />
javaclasspath.txt file if your Matlab runs with sufficient permissions,<br />
e.g., administrator permissions.</p></li>
</ol>
<p>If you need a quick temporary fix for the problem, other than editing<br />
classpath.txt and restarting Matlab, then type ‘PsychJavaTrouble’ at the<br />
Matlab command prompt. The function will add the <a href="PsychJava" class="uri">PsychJava</a> folder to the<br />
dynamic classpath to immediately enable Java based Psychtoolbox<br />
functions. This fix is temporary however, it needs to be repeated after<br />
each restart of Matlab. Executing the command will also clear all<br />
variables and functions from Matlabs workspace (like ‘clear all’), so<br />
adding it to experiment scripts may impair proper working of that<br />
scripts.</p>
<ol start="4" type="1">
<li><p>You didn’t restart Matlab after the Psychtoolbox installer asked you<br />
to do so. -&gt; Restart Matlab and retry.</p></li>
<li><p>The versions of <a href="GetCharJava" class="uri">GetCharJava</a> bundled with Psychtoolbox are incompatible<br />
with the version of Java installed on your machine or bundled with your<br />
version of Matlab. If you have a Java SDK installed on your machine,<br />
Psychtoolbox will try to compile a matching version of <a href="GetCharJava" class="uri">GetCharJava</a>. This<br />
should succeed on OS-X but is unlikely to work on Windows, because that<br />
system does not have a javac compiler installed by default.</p></li>
<li><p>Other reasons: Post to the Psychtoolbox forum and ask for help.</p></li>
</ol>
<p>Good luck!</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychJava/PsychJavaTrouble.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychJava/PsychJavaTrouble.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychJava/PsychJavaTrouble.m</code></p>
</div>
