<h1 id="datapixxreadmicrophonebuffer"><a href="Datapixx-ReadMicrophoneBuffer">Datapixx(‘ReadMicrophoneBuffer’)</a></h1>
<h2 id="psychtoolbox-datapixx.mexdll-subfunction">[[Psychtoolbox]] › [[Datapixx]].{mex*,dll} subfunction</h2>
<p>Upload audio input data from a Datapixx internal acquisition buffer to the local<br />
host.<br />
-“numFrames” is the number of acquired frames to upload. In a streaming<br />
application, numFrames should not exceed newBufferFrames returned by<br />
<a href="GetMicrophoneStatus" class="uri">GetMicrophoneStatus</a>. It may be possible to reduce dynamic memory allocation<br />
overhead by matching numFrames to the size of an existing bufferData output<br />
argument.<br />
-“bufferAddress” is the byte address in Datapixx RAM where the buffered data can<br />
be found. If this argument is not provided, it will take on the value of<br />
bufferBaseAddress passed to the last call to <a href="SetMicrophoneSchedule" class="uri">SetMicrophoneSchedule</a>. Specifying a<br />
bufferAddress of -1 will cause data to be streamed from the buffer which was<br />
defined in the last call to <a href="SetMicrophoneSchedule" class="uri">SetMicrophoneSchedule</a>.<br />
-“bufferData” is a 2D matrix of acquired audio input data in the range -1 to +1.<br />
The first row of the matrix contains data for the left ear, and the second row<br />
contains data for the right ear. A non-stereo dataset will only have a single<br />
row. <a href="ReadMicrophoneBuffer" class="uri">ReadMicrophoneBuffer</a> assumes that the number of channels to return equals<br />
the number of channels specified by lrMode in the last call to<br />
<a href="SetMicrophoneSchedule" class="uri">SetMicrophoneSchedule</a>.<br />
-“underflow” or “overflow” are set to 1 if streaming calls to<br />
<a href="ReadMicrophoneBuffer" class="uri">ReadMicrophoneBuffer</a> read data too quickly or too slowly. If bufferAddress is<br />
passed a value of -1, then <a href="ReadMicrophoneBuffer" class="uri">ReadMicrophoneBuffer</a> is streaming continuous<br />
acquisition data from a circular buffer. Streaming acquisition must ensure that<br />
the uploaded data frame always remains behind the acquisition frame, without<br />
allowing acquired data to overflow the acquisition buffer. The newBufferFrames<br />
field returned by <a href="GetMicrophoneStatus" class="uri">GetMicrophoneStatus</a> indicates the maximum number of frames<br />
which can be read by <a href="ReadMicrophoneBuffer" class="uri">ReadMicrophoneBuffer</a>. If more than this number of frames is<br />
read, an underflow occurs and there will be errors in the acquired data. If the<br />
streaming data is not read quickly enough, and newBufferFrames exceeds the<br />
buffer size (numBufferFrames passed to <a href="SetMicrophoneSchedule">SetMicrophoneSchedule)</a>) then an overflow<br />
has occurred, causing data to be lost. In addition to returning<br />
underflow/overflow flags, the numStreamUnderflows/numStreamOverflows fields<br />
returned by <a href="GetMicrophoneStatus" class="uri">GetMicrophoneStatus</a> will be incremented.<br />
See <a href="DatapixxMicrophone" class="uri">DatapixxMicrophone</a>*Demo files for examples.</p>
<p>&lt;&lt;=====See also:===== SetMicrophoneSchedule, StartMicrophoneSchedule, StopMicrophoneSchedule, GetMicrophoneStatus &lt;&lt;</p>
