<h2 id="psychtoolbox-psychtests">[[Psychtoolbox]] › [[PsychTests]]</h2>
<p><a href="SyncedCLUTUpdateTest" class="uri">SyncedCLUTUpdateTest</a></p>
<p>Perceptual test to test synchronization of hardware gamma table<br />
updates to the vertical refresh and to <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’).</p>
<p>The command <a href="Screen" class="uri">Screen</a>(‘LoadNormalizedGammaTable’) provides the optional parameter<br />
‘loadOnNextFlip’. If set to 1, Psychtoolbox is requested to defer the upload<br />
of the specified gamma table until next execution of the <a href="Screen" class="uri">Screen</a>(‘<a href="Flip" class="uri">Flip</a>’) command,<br />
i.e. swapping the back- and front buffers and update of the gamma table should<br />
happen synchronously with each other and with vertical retrace.</p>
<p>This test allows to perceptually check correctness of this mechanism. In a loop<br />
it shows two alternating stimuli: A gray-level ramp of range 0-255, displayed<br />
with a hardware lut of *half* intensity range 0-0.5. Then, after next retrace, a<br />
gray-level ramp of *half* range 0-128 with a hardware lut of *full* intensity range<br />
0-1.0. If update of the visual stimulus (the graylevel ramp) and of the corresponding<br />
clut happens synchronously at the same vertical retrace during the ‘<a href="Flip" class="uri">Flip</a>’ command,<br />
as expected, then the half intensity stim + full intensity lut or full intensity stim +<br />
half intensity lut should cancel each other out, resulting in the perception of a<br />
half-intensity gray-ramp with no or only minimal flicker. If, on the other hand,<br />
synchronisation of clut update and flip doesn’t work properly, then one should see<br />
a strong flicker of the gray-ramp due to non-matching stimulus and clut.</p>
<p>You can easily produce the visual impression of failed sync by providing the optional<br />
parameter synced = 0 to enforce non-synced updates.</p>
<p>Even if synced updates work, you may see some artifacts at the top of the display,<br />
due to the inability of slow gfx-hardware to update the lut quickly enough. Either<br />
avoid that display area for your stim or buy a faster graphics card. Enabling realtime<br />
scheduling via <a href="Priority" class="uri">Priority</a>() command may also help.</p>
<p>The accuracy of stimulus onset timestamps may be reduced on M$-Windows when using<br />
this mode of operation.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychTests/SyncedCLUTUpdateTest.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychTests/SyncedCLUTUpdateTest.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychTests/SyncedCLUTUpdateTest.m</code></p>
</div>
