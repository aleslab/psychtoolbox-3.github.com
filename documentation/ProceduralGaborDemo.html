<h2 id="psychtoolbox-psychdemos">[[Psychtoolbox]] › [[PsychDemos]]</h2>
<p><a href="ProceduralGaborDemo" class="uri">ProceduralGaborDemo</a>([benchmark=0][, nonsymmetric=0])</p>
<p>This demo demonstrates fast drawing of Gabor patches via use procedural<br />
texture mapping. It only works on hardware with support for the GLSL<br />
shading language, vertex- and fragment-shaders.</p>
<p>Gabors are not encoded into a texture, but instead a little algorithm - a<br />
procedural texture shader - is executed on the graphics processor (GPU).<br />
This is very fast and efficient! All parameters of the gabor patch can be<br />
set individually.</p>
<p>By default - if the optional ‘nonsymmetric’ flag is not provided or set<br />
to zero - only symmetric circular gabors are drawn. If the flag is set to<br />
1 then gabors with an aspect ratio ~= 1, ie., elliptical gabors, are<br />
drawn as well. Restricting drawing to symmetric gabors allows for an<br />
additional speedup in drawing (about 15% on a <a href="MacBookPro" class="uri">MacBookPro</a> 2nd generation),<br />
so this may be interesting if you are in “need for speed(TM)”.</p>
<p>This demo is both, a speed benchmark, and a correctness test. If executed<br />
with the optional benchmark flag set to 2, it will execute a loop<br />
where it repeatedly draws a gabor patch both on the GPU (new style) and<br />
with Matlab code, then reads back and verifies the images, evaluating the<br />
maximum error between the old Matlab method and the new GPU method. The<br />
maximum error value and plotted error map are a means to assess if<br />
procedural shading works correctly on your setup and if the accuracy is<br />
sufficient for your purpose. In benchmark mode (flag set to 1), the gabor<br />
is drawn as fast as possible, testing the maximum rate at which your<br />
system can draw gabors.</p>
<p>At a default setting of benchmark==0, it just shows nicely drawn gabor.</p>
<p>Typical results on a <a href="MacBookPro" class="uri">MacBookPro</a> with Radeon X1600 under OS/X 10.4.11 are:<br />
Accuracy: Error wrt. Matlab reference code is 0.0005536900, i.e., about<br />
1 part in 2000, equivalent to a perfect display on a gfx-system with 11 bit<br />
DAC resolution. Note that errors scale with spatial frequency and<br />
absolute magnitude, so real-world errors are usually smaller for typical<br />
stimuli. This is just the error, given the settings hardcoded in this script.<br />
Typical speed is 2800 frames per second.</p>
<p>The error on a Radeon HD 2400 XT is 0.0000842185, i.e., about 1 part in<br />
11000, equivalent to perfect display on a 13 bit DAC resolution gfx<br />
system.</p>
<p>The error on a Radeon HD 5870 on OS/X 10.6 is 0.0000274425 units, about 15<br />
bits effective resolution, with a framerate of 8175 fps.</p>
<p>Typical result on Intel Pentium IV, running on <a href="WindowsXP" class="uri">WindowsXP</a> with a <a href="NVidia" class="uri">NVidia</a><br />
Geforce7800 and up-to-date drivers: Error is 0.0000146741 units, ie. one<br />
part in 68000, therefore display would be perfect even on a display device<br />
with 15 bit DAC’s. The framerate is about 2344 frames per second.</p>
<p>A Geforce 8800 on OS/X achieves about max error 0.0000207 units and<br />
a max fps of 3029 frames per second.</p>
<p>Please note that results in performance and accuracy *will* vary,<br />
depending on the model of your graphics card, gfx-driver version and<br />
possibly operating system. For consistent results, always check before you<br />
measure on different setups! However, the more recent the graphics card,<br />
the faster and more accurate – the latest generation of cards is<br />
supposed to be “just perfect” for vision research…</p>
<p>If you want to draw many gabors per frame, you wouldn’t do it like in this script,<br />
but use the batch-drawing version of <a href="Screen" class="uri">Screen</a>(‘DrawTextures’, …) instead,<br />
as demonstrated, e.g., in <a href="DrawingSpeedTest" class="uri">DrawingSpeedTest</a>.m. That way you could submit<br />
the specs (parameters) of all gabors in one single matrix via one single<br />
<a href="Screen" class="uri">Screen</a>(‘DrawTextures’); call - this is more efficient and therefore extra<br />
fast!</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychDemos/ProceduralGaborDemo.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychDemos/ProceduralGaborDemo.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychDemos/ProceduralGaborDemo.m</code></p>
</div>
