<h2 id="psychtoolbox-psychcontributed-autobrightness">[[Psychtoolbox]] › [[PsychContributed]] › [[AutoBrightness]]</h2>
<p>[oldSetting, status] = <a href="AutoBrightness" class="uri">AutoBrightness</a>([screenNumber=0][, newSetting])</p>
<p>AUTOBRIGHTNESS Get and set the “Automatically adjust brightness” checkbox<br />
on the Mac OS X: System Preferences: Displays panel. The function<br />
argument “newSetting” (integer 0 or 1) indicates whether you want to turn<br />
the autobrightness feature on (newSetting==1) or off (newSetting==0). If<br />
you call without an argument (or anything other than 0 or 1) then nothing<br />
is changed. The current state is always reported in the returned<br />
oldSetting (0 or 1). The optionally returned “status” is always zero<br />
unless the applescript failed.</p>
<p>If the user has not yet given permission for MATLAB to control the<br />
computer (in System Preferences:Security &amp; Privacy:Accessibility), then<br />
the <a href="AutoBrightness" class="uri">AutoBrightness</a> applescript will put up a helpful alert and wait for<br />
the user to enable control. CAUTION: Call <a href="AutoBrightness" class="uri">AutoBrightness</a> BEFORE you open<br />
a Psychtoolbox window: If the alert window is hidden by a Psychtoolbox<br />
window, then the user won’t know that the program is waiting for him or<br />
her. For this reason the <a href="AutoBrightness" class="uri">AutoBrightness</a> function will abort with an error<br />
if you try to call it while an onscreen window is already open.</p>
<p><a href="AutoBrightness" class="uri">AutoBrightness</a>.m uses <a href="AutoBrightness" class="uri">AutoBrightness</a>.applescript to allow you to turn off<br />
a pesky feature of Apple’s liquid crystal displays. In Mac OSX, this<br />
feature is manually enabled/disabled by the“Automatically adjust<br />
brightness”checkbox in theSystem Preferences: Displays panel. While the<br />
feature is enabled, your Mac slowly adjusts the screen luminance of your<br />
Apple liquid crystal display, depending the the luminance of the room.<br />
That’s bad for screen calibration, and perhaps also bad for your<br />
experiments. My <a href="AutoBrightness" class="uri">AutoBrightness</a> routines allow your programs to read the<br />
on/off setting of that feature, and enable or disable it. For use in<br />
MATLAB, please put both files anywhere in MATLAB’s path. I hope they will<br />
be added to the Psychtoolbox.</p>
<p>Written by denis.pelli@nyu.edu for the Psychtoolbox, May 21, 2015.</p>
<p>This Psychtoolbox MATLAB function calls my <a href="AutoBrightness" class="uri">AutoBrightness</a> applescript,<br />
which allows you to temporarily disable a feature of Apple Macintosh<br />
laptops that is undesirable for vision experiments and display<br />
calibration. The applescript is equivalent to manually opening the System<br />
<a href="Preference" class="uri">Preference</a>:Displays panel and clicking to turn on or off the “Automatic<br />
brightness adjustment” checkbox. I wrote the script to be invoked from<br />
MATLAB, but you could call in from any application. One important use of<br />
the script is to prevent changes of brightness in response to the room<br />
luminance while calibrating a display. The automatic adjustments are<br />
slow, over many seconds, which could invalidate your display calibration.<br />
When “Automatically adjust brightness” is checked, the Mac OS uses the<br />
video camera to sense the room luminance and slowly dims the display if<br />
the room is dark. It does this by adjusting the “brightness” setting,<br />
which controls the luminance of the fluorescent light that is behind the<br />
liquid crystal display. I believe that the “brightness” slider controls<br />
only the luminance of the source, and does not affect the liquid crystal<br />
itsef, which is controlled by the color lookup table. The luminance at<br />
the viewer’s eye is presumably the product of the two factors: luminance<br />
of the source and transmission of the liquid crystal, at each wavelength.</p>
<p>INSTALLATION. To work with MATLAB, please put both files anywhere in<br />
MATLAB’s path. I hope they will be added to the Psychtoolbox.</p>
<p>CAUTION. This uses the “System Preferences: Displays” panel, which takes<br />
30 s to open if it isn’t already open. I set up the <a href="AutoBrightness" class="uri">AutoBrightness</a><br />
applescript to always leave System Preferences open, so you won’t waste<br />
your observer’s time waiting 30 s for System Preferences to open every<br />
time you call <a href="AutoBrightness" class="uri">AutoBrightness</a>.</p>
<p>BRIGHTNESS. Psychtoolbox for MATLAB and Macintosh already has a <a href="Screen" class="uri">Screen</a><br />
call to get and set the brightness, so we don’t need applescript for<br />
that. The Psychtoolbox call is:<br />
[oldBrightness]=<a href="Screen" class="uri">Screen</a>(‘ConfigureDisplay’,‘Brightness’, screenId [,outputId][,brightness]);</p>
<p>APPLE SECURITY. The first time any application (e.g. MATLAB) calls<br />
<a href="AutoBrightness" class="uri">AutoBrightness</a>.applescript, the request will be blocked and an error<br />
dialog window will appear saying the application is “not allowed<br />
assistive access.” This means that the application needs an<br />
administrator’s permission to access the System Preferences. A user with<br />
admin privileges should then click as requested to provide that<br />
permission. This needs to be done only once (for each application).</p>
<p>MULTIPLE SCREENS: All my computers have only one screen, so I haven’t<br />
implemented support for multiple screens. I think that would be<br />
straightforward. I would add a second, optional, argument that specifies<br />
which screen.</p>
<p>LINUX and WINDOWS. Applescript works only under Mac OS X. When running<br />
under any operating system other that Mac OS X, this program ignores the<br />
newSetting argument and always returns zero as the oldSetting. It is<br />
conceivable that Apple’s auto brightness feature is implemented on<br />
Macintoshes running Linux or Windows. If that applies to you, please<br />
consider enhancing this program to return a correct answer for that case,<br />
and sharing the result with me and the Psychtoolbox forum.</p>
<div class="code_header" style="text-align:right;">
<p><span style="float:left;">Path  </span> <span class="counter">Retrieve <a href=
  "https://raw.github.com/Psychtoolbox-3/Psychtoolbox-3/beta/Psychtoolbox/PsychContributed/AutoBrightness/AutoBrightness.m">current version from GitHub</a> | View <a href=
  "https://github.com/Psychtoolbox-3/Psychtoolbox-3/commits/beta/Psychtoolbox/PsychContributed/AutoBrightness/AutoBrightness.m">changelog</a></span></p>
</div>
<div class="code">
<p><code>Psychtoolbox/PsychContributed/AutoBrightness/AutoBrightness.m</code></p>
</div>
