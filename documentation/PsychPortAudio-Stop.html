<h1 id="psychportaudiostop"><a href="PsychPortAudio-Stop">PsychPortAudio(‘Stop’)</a></h1>
<h2 id="psychtoolbox-psychportaudio.mexdll-subfunction">[[Psychtoolbox]] › [[PsychPortAudio]].{mex*,dll} subfunction</h2>
<p>Stop a <a href="PortAudio" class="uri">PortAudio</a> audio device. The ‘pahandle’ is the handle of the device to<br />
stop.<br />
‘waitForEndOfPlayback’ - If set to 1, this method will wait until playback of<br />
the audio stream finishes by itself. This only makes sense if you perform<br />
playback with a defined playback duration. The flag will be ignored when<br />
infinite repetition is requested (as playback would never stop by itself,<br />
resulting in a hang) and if no scheduled ‘stopTime’ has been set, either in this<br />
call or in the ‘Start’ function. The setting will be also ignored if this is a<br />
pure recording session.<br />
A setting of 0 (which is the default) requests stop of playback without waiting<br />
for all the sound to be finished playing. Sound may continue to be played back<br />
for multiple milliseconds after this call, as this is a polite request to the<br />
hardware to finish up.<br />
A setting of 2 requests abortion of playback and/or capture as soon as possible<br />
with your sound hardware, even if this creates audible artifacts etc. Abortion<br />
may or may not be faster than a normal stop, this depends on your specific<br />
hardware, but our driver tries as hard as possible to get the hardware to shut<br />
up. In a worst-case setting, the hardware would continue to playback the sound<br />
data that is stored in its internal buffers, so the latency for stopping sound<br />
would be the the same as the latency for starting sound as quickly as possible.<br />
E.g., a 2nd generation Intel <a href="MacBook" class="uri">MacBook</a> Pro seems to have a stop-delay of roughly<br />
5-6 msecs under optimal conditions (e.g., buffersize = 64, frequency=96000, OS/X<br />
10.4.10, no other sound apps running).<br />
A setting of 3 will not try to stop the playback now: You can use this setting<br />
if you just want to use this function to wait until playback stops by itself,<br />
e.g. because the set number of ‘repetitions’ or the set ‘stopTime’ has been<br />
reached. You can also use this to just change the ‘repetitions’ or ‘stopTime’<br />
settings without waiting for anything.<br />
The optional parameter ‘blockUntilStopped’ defines if the subfunction should<br />
wait until sound processing has really stopped (at a setting of 1, which is the<br />
default), or if the function should return with minimal delay after only<br />
scheduling a stop at a zero setting. If ‘waitForEndOfPlayback’ is set to 1, then<br />
‘blockUntilStopped’ is meaningless and the function will always block until the<br />
stop is completed.<br />
The optional parameter ‘stopTime’ allows to set a defined system time when<br />
playback should stop by itself. Similar, the optional ‘repetitions’ setting<br />
allows to change the number of repetitions after which playback should stop by<br />
itself. These settings allow you to override the same settings made during a<br />
call to the ‘Start’ or ‘RescheduleStart’ function.<br />
The optional return argument ‘startTime’ returns an estimate of when the stopped<br />
stream actually started its playback and/or recording. Its the same timestamp as<br />
the one returned by the start command when executed in waiting mode.<br />
‘endPositionSecs’ is the final playback/recording position in seconds. ‘xruns’<br />
is the number of buffer over- or underruns. This should be zero if the playback<br />
operation was glitch-free, however a zero value doesn’t imply glitch free<br />
operation, as the glitch detection algorithm can miss some types of glitches.<br />
The optional return argument ‘estStopTime’ returns an estimate of when playback<br />
likely stopped.<br />
The return arguments are undefined if you set the ‘blockUntilStopped’ flag to<br />
zero.</p>
<p>&lt;&lt;=====See also:===== Open GetDeviceSettings &lt;&lt;</p>
